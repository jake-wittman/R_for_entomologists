<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R For Entomologists</title>
  <meta name="description" content="An attempt to push entomologists up the R learning curve and reduce R anxiety.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="R For Entomologists" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/cover.png" />
  <meta property="og:description" content="An attempt to push entomologists up the R learning curve and reduce R anxiety." />
  <meta name="github-repo" content="wittja01/r_for_entomologists" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R For Entomologists" />
  
  <meta name="twitter:description" content="An attempt to push entomologists up the R learning curve and reduce R anxiety." />
  <meta name="twitter:image" content="images/cover.png" />

<meta name="author" content="Jake Wittman">


<meta name="date" content="2019-02-04">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="introduction-to-data-cleaning-and-manipulation.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="organizing-your-work-and-your-code.html"><a href="organizing-your-work-and-your-code.html"><i class="fa fa-check"></i><b>2</b> Organizing Your Work and Your Code</a><ul>
<li class="chapter" data-level="2.1" data-path="organizing-your-work-and-your-code.html"><a href="organizing-your-work-and-your-code.html#style-guides"><i class="fa fa-check"></i><b>2.1</b> Style guides</a><ul>
<li class="chapter" data-level="2.1.1" data-path="organizing-your-work-and-your-code.html"><a href="organizing-your-work-and-your-code.html#spaces"><i class="fa fa-check"></i><b>2.1.1</b> Spaces</a></li>
<li class="chapter" data-level="2.1.2" data-path="organizing-your-work-and-your-code.html"><a href="organizing-your-work-and-your-code.html#long-lines-of-code"><i class="fa fa-check"></i><b>2.1.2</b> Long lines of code</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="organizing-your-work-and-your-code.html"><a href="organizing-your-work-and-your-code.html#organizing-your-work"><i class="fa fa-check"></i><b>2.2</b> Organizing your work</a><ul>
<li class="chapter" data-level="2.2.1" data-path="organizing-your-work-and-your-code.html"><a href="organizing-your-work-and-your-code.html#rstudio-projects"><i class="fa fa-check"></i><b>2.2.1</b> RStudio Projects</a></li>
<li class="chapter" data-level="2.2.2" data-path="organizing-your-work-and-your-code.html"><a href="organizing-your-work-and-your-code.html#organizing-your-rstudio-project-folder"><i class="fa fa-check"></i><b>2.2.2</b> Organizing your RStudio Project folder</a></li>
<li class="chapter" data-level="2.2.3" data-path="organizing-your-work-and-your-code.html"><a href="organizing-your-work-and-your-code.html#splitting-up-your-code"><i class="fa fa-check"></i><b>2.2.3</b> Splitting up your code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html"><i class="fa fa-check"></i><b>3</b> Introduction to Data Cleaning and Manipulation</a><ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#background-required"><i class="fa fa-check"></i><b>3.1</b> Background required</a></li>
<li class="chapter" data-level="3.2" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#lets-get-started"><i class="fa fa-check"></i><b>3.2</b> Let’s get started!</a></li>
<li class="chapter" data-level="3.3" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#the-pipe"><i class="fa fa-check"></i><b>3.3</b> The pipe</a></li>
<li class="chapter" data-level="3.4" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#pipe-examples"><i class="fa fa-check"></i><b>3.4</b> Pipe examples</a></li>
<li class="chapter" data-level="3.5" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#chaining-multiple-functions-together-with-the-pipe"><i class="fa fa-check"></i><b>3.5</b> Chaining multiple functions together with the pipe</a><ul>
<li class="chapter" data-level="3.5.1" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#nesting-multiple-functions"><i class="fa fa-check"></i><b>3.5.1</b> Nesting multiple functions</a></li>
<li class="chapter" data-level="3.5.2" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#saving-every-intermediate-step-without-any-pipes"><i class="fa fa-check"></i><b>3.5.2</b> Saving every intermediate step without any pipes</a></li>
<li class="chapter" data-level="3.5.3" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#using-multiple-pipes"><i class="fa fa-check"></i><b>3.5.3</b> Using multiple pipes</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#dplyr-verbs"><i class="fa fa-check"></i><b>3.6</b> <code>dplyr</code> Verbs</a><ul>
<li class="chapter" data-level="3.6.1" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#selecting-columns-using-select"><i class="fa fa-check"></i><b>3.6.1</b> Selecting columns using <code>select()</code></a></li>
<li class="chapter" data-level="3.6.2" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#filtering-rows-using-filter"><i class="fa fa-check"></i><b>3.6.2</b> Filtering rows using <code>filter()</code></a></li>
<li class="chapter" data-level="3.6.3" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#arranging-your-data-with-arrange"><i class="fa fa-check"></i><b>3.6.3</b> Arranging your data with <code>arrange()</code></a></li>
<li class="chapter" data-level="3.6.4" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#mutating-new-columns-with-mutate"><i class="fa fa-check"></i><b>3.6.4</b> “Mutating” new columns with <code>mutate()</code></a></li>
<li class="chapter" data-level="3.6.5" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#summarising-data-with-summarise"><i class="fa fa-check"></i><b>3.6.5</b> Summarising data with <code>summarise()</code></a></li>
<li class="chapter" data-level="3.6.6" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#grouping-your-data-using-group_by"><i class="fa fa-check"></i><b>3.6.6</b> Grouping your data using <code>group_by()</code></a></li>
<li class="chapter" data-level="3.6.7" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#tidyverse-practice-problems"><i class="fa fa-check"></i><b>3.6.7</b> <code>tidyverse</code> Practice problems</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#modifying-data-with-case_when"><i class="fa fa-check"></i><b>3.7</b> Modifying data with <code>case_when()</code></a><ul>
<li class="chapter" data-level="3.7.1" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#case_when-practice-problem"><i class="fa fa-check"></i><b>3.7.1</b> <code>case_when()</code> practice problem</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#answers-to-practice-questions"><i class="fa fa-check"></i><b>3.8</b> Answers to practice questions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="for-loops.html"><a href="for-loops.html"><i class="fa fa-check"></i><b>4</b> For loops</a><ul>
<li class="chapter" data-level="4.1" data-path="for-loops.html"><a href="for-loops.html#what-is-a-for-loop"><i class="fa fa-check"></i><b>4.1</b> What is a for loop?</a></li>
<li class="chapter" data-level="4.2" data-path="for-loops.html"><a href="for-loops.html#a-brief-detour-into-indexing"><i class="fa fa-check"></i><b>4.2</b> A brief detour into indexing</a></li>
<li class="chapter" data-level="4.3" data-path="for-loops.html"><a href="for-loops.html#c"><i class="fa fa-check"></i><b>4.3</b> C</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>5</b> R Markdown</a><ul>
<li class="chapter" data-level="5.1" data-path="r-markdown.html"><a href="r-markdown.html#headers"><i class="fa fa-check"></i><b>5.1</b> Headers!</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R For Entomologists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="organizing-your-work-and-your-code" class="section level1">
<h1><span class="header-section-number">2</span> Organizing Your Work and Your Code</h1>
<p>It can be tempting when writing code to be lazy and disorganized. Resist that temptation! Future you will thank you. To help you write more organized code, I’ll demonstrate some examples of good and bad code here. I’ll also provide some tips and tricks that aren’t immediately obvious, and I’ll also introduce how to use R projects to help organize not only your code, but also your files.</p>
<div id="style-guides" class="section level2">
<h2><span class="header-section-number">2.1</span> Style guides</h2>
<p>The first step to writing organized code is to be consistent and the best way to be consistent is to use a style guide. Style guides are used by large organizations where many people may be working on the same project(s) to make sure their code is consistent. Consistent coding allows people to work more easily with other’s code. It can also help you write clearer code for yourself. Here are a few examples:</p>
<ul>
<li><a href="https://google.github.io/styleguide/Rguide.xml">Google’s R style guide</a></li>
<li><a href="https://style.tidyverse.org/">Hadley Wickham’s R style guide</a></li>
<li><a href="http://jef.works/R-style-guide/">Someone else’s R style guide</a></li>
</ul>
<p>As an R beginner, you won’t understand everything discussed in these style guides so they should be a resource you reference as your R skills grow to see if there’s anything you’ve missed. Pick any style guide that you like best and don’t feel the need to follow every single element of the style guide, just make sure you’re consistent and deviate in the same way within a single code file.</p>
<p>I won’t spend time going through the details of these style guides but I do want to hilight a few style suggestions that I think are the most important and that you should always follow to make your code more organized and readable.</p>
<div id="spaces" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Spaces</h3>
<p>Use them! Please! Nothing raises my blood pressure more than when I see code like the following bad example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Bad = no spaces</span>
<span class="kw">ggplot</span>(data,<span class="kw">aes</span>(<span class="dt">x=</span>x_variable,<span class="dt">y=</span>_yvariable))<span class="op">+</span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">colour=</span>site))

<span class="co"># Good = spaces</span>
<span class="kw">ggplot</span>(data, <span class="kw">aes</span>(<span class="dt">x =</span> x_variable, <span class="dt">y =</span> y_variable)) <span class="op">+</span><span class="st"> </span>
<span class="st">   </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> site))</code></pre></div>
<p>The first example is so hard to read! WouldyouwanttoreadthisdocumentifIwroteeverythinglikethis? I bet you wouldn’t. Use spaces. Check out one of the style guides to see when you should use spaces.</p>
</div>
<div id="long-lines-of-code" class="section level3">
<h3><span class="header-section-number">2.1.2</span> Long lines of code</h3>
<p>You should avoid writing a line of code that is longer than 80 characters. There are several reasons for this:</p>
<ul>
<li>Per <a href="https://style.tidyverse.org/syntax.html#object-names">Hadley Wickham</a>, 80 characters per line fits on a printed page.</li>
<li>If your code is longer than 80 characters, you may be trying to do too much at once, like nesting 3 or more functions within one another. 80 characters serves as a good benchmark to keep your code simple.</li>
<li>Long lines of code may require sideways screen scrolling, which is annoying. Imagine trying to read a book written so you had to read the first line of every page, then the second line of every page, and so on.</li>
<li>Sometimes code within a single function may require more than 80 characters. Spreading this code over multiple lines rather than containing it in one line enhances readability.</li>
</ul>
<p>How do you know if your code goes over 80 characters? Rstudio has a neat feature you can turn on that puts a little bar in your script window showing you where 80 characters is. To turn on this feature, go to the “Tools” dropdown menu and click “Global Options”. From there, click the “Code” section on the left. Then click on the “Display” tab and check the “Show margin” box and set the “margin column” to 80.</p>
<p>The spacing example from above provides an example of spreading a long line of code out over multiple lines.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Bad = this time there are spaces, but the code is too long (just barely)</span>
<span class="kw">ggplot</span>(data, <span class="kw">aes</span>(<span class="dt">x =</span> x_variable, <span class="dt">y =</span> y_variable)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> site))

<span class="co"># Good = multiple lines</span>
<span class="kw">ggplot</span>(data, <span class="kw">aes</span>(<span class="dt">x =</span> x_variable, <span class="dt">y =</span> y_variable)) <span class="op">+</span><span class="st"> </span>
<span class="st">   </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> site))</code></pre></div>
<p>How do you know where to split lines of code? Split your code among lines so it reads in a uniform way and at least tries to follow a pattern. Keep in mind that when splitting up long lines of code, indenting is your friend. Use indents to make your code line up in ways that are sensible and make it easier to read. Here are a few examples, it’s not important you understand what the code is doing but just pay attention to the patterns (or lack thereof) of dividing up the lines of code.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Bad = no consistent pattern for splitting code between lines, also goes over</span>
<span class="co"># 80 characters on occasion.</span>
<span class="kw">ggplot</span>(<span class="dt">data=</span>dat2016, <span class="kw">aes</span>(m_total_path)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>(<span class="dt">fill=</span><span class="st">&quot;white&quot;</span>, <span class="dt">colour=</span><span class="st">&quot;black&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">facet_grid</span>(treat_id <span class="op">~</span><span class="st"> </span>.) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme</span>(<span class="dt">panel.grid.major =</span> <span class="kw">element_blank</span>(),
                     <span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(), <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>)) <span class="op">+</span><span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&quot;Total Path Distance&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;Total Path Distance (m)&quot;</span>, <span class="dt">y=</span><span class="st">&quot;# of Larvae&quot;</span>)

<span class="co"># Good = Consistent splitting pattern by starting a new line after each +. Also</span>
<span class="co"># starting a new line after each comma in the theme() function to keep each line</span>
<span class="co"># under 80 characters</span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> dat2016, <span class="kw">aes</span>(m_total_path)) <span class="op">+</span>
<span class="st">   </span><span class="kw">geom_histogram</span>(<span class="dt">fill =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>) <span class="op">+</span>
<span class="st">   </span><span class="kw">facet_grid</span>(treat_id <span class="op">~</span><span class="st"> </span>.) <span class="op">+</span>
<span class="st">   </span><span class="kw">theme_bw</span>() <span class="op">+</span>
<span class="st">   </span><span class="kw">theme</span>(<span class="dt">panel.grid.major =</span> <span class="kw">element_blank</span>(),
         <span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(),
         <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>)) <span class="op">+</span>
<span class="st">   </span><span class="kw">ggtitle</span>(<span class="st">&quot;Total Path Distance&quot;</span>) <span class="op">+</span>
<span class="st">   </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Total Path Distance (m)&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;# of Larvae&quot;</span>)


<span class="co"># Bad = no consistency, too many nested functions, too long</span>
mean_avg_dist2016 &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">as.list</span>(<span class="kw">aggregate</span>(m_total_path <span class="op">~</span><span class="st"> </span>treat_id, <span class="dt">data=</span>dat2016_movers, 
                                                     <span class="dt">FUN =</span> <span class="cf">function</span>(x) <span class="kw">c</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(x), <span class="dt">n =</span> <span class="kw">length</span>(x), <span class="dt">se =</span> <span class="kw">sd</span>(x)<span class="op">/</span><span class="kw">sqrt</span>(<span class="kw">length</span>(x))))))

<span class="co"># Better = consistent line splitting but too many functions nested inside one</span>
<span class="co"># another. Putting closing parenthesis on different lines can help</span>
<span class="co"># compartmentalize code</span>
mean_avg_dist2016 &lt;-
<span class="st">   </span><span class="kw">as.data.frame</span>(
      <span class="kw">as.list</span>(
         <span class="kw">aggregate</span>(m_total_path <span class="op">~</span><span class="st"> </span>treat_id,
                   <span class="dt">data =</span> dat2016_movers,
                   <span class="dt">FUN =</span> <span class="cf">function</span>(x) <span class="kw">c</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(x),
                                       <span class="dt">n =</span> <span class="kw">length</span>(x),
                                       <span class="dt">se =</span> <span class="kw">sd</span>(x) <span class="op">/</span><span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">length</span>(x)
                                                         )
                                       )
                   )
         )
      )

<span class="co"># Best = Consistent line splitting without nesting too many functions enhances</span>
<span class="co"># readability.</span>
<span class="co"># In the first function aggregate, we give each argument it&#39;s own line.</span>
<span class="co"># When specify the custom function to use (FUN = ...), we split each of those</span>
<span class="co"># functions onto their own line. Close paranthesis mark the end of functions</span>
aggregate_data &lt;-<span class="st"> </span><span class="kw">aggregate</span>(m_total_path <span class="op">~</span><span class="st"> </span>treat_id,
                            <span class="dt">data =</span> dat2016_movers,
                            <span class="dt">FUN =</span> <span class="cf">function</span>(x) <span class="kw">c</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(x),
                                                <span class="dt">n =</span> <span class="kw">length</span>(x),
                                                <span class="dt">se =</span> <span class="kw">sd</span>(x) <span class="op">/</span><span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">length</span>(x))
                                                )
                            )
<span class="co"># Then we can take what we produced above and use it below, in a readable form.</span>
mean_avg_dist2016 &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">as.list</span>(aggregate_data))</code></pre></div>
<p>In the last example, it made sense for us to make our code more readable by both spreading the code over more vertical space AND adding an intermediate step where we saved the output of one function and then used that output in another. This is what I was referring to above when I said if a line of code is over 80 characters, you might be trying to do too much in that line. The pipe operator, <code>%&gt;%</code> which is covered elsewhere in this book, is really helpful in preventing this scenario from occurring.</p>
<p>There are a lot of smaller details to consider that are mentioned in a style guide, like conventions for naming objects and files and such, but we won’t get into these here. In this section we took a look at some of the nitty-gritty aspect of code writing but for the next few sections, we’re going to zoom out above the code level and talk more generally organizing your files utilizing R projects.</p>
</div>
</div>
<div id="organizing-your-work" class="section level2">
<h2><span class="header-section-number">2.2</span> Organizing your work</h2>
<div id="rstudio-projects" class="section level3">
<h3><span class="header-section-number">2.2.1</span> RStudio Projects</h3>
<p>Rstudio provides yet another useful feature to help you organize your files and code in neat self-contained folders, called “R Projects”. From the <a href="https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects">Rstudio website</a>, “RStudio projects make it straightforward to divide your work into multiple contexts, each with their own working directory, workspace, history, and source documents.” I generally make a separate RStudio project for each work project I’m working on. For example, my Master’s thesis had two chapters based on two different sets of experiments that I did. Each of those chapters had their own folder on my harddrive with an RStudio project file in it, which allowed me to easily keep all my data, code, figures, and writing in one location. RStudio projects are especially useful for easily accessing data in code and saving any outputs from your code, because it automatically sets your working directory for you.</p>
<p>You can create a project by going to the File dropdown menu and selecting “New Project”. You can create a project along with a new directory (aka folder) or you can put the project file into an existing folder. For these tutorials, I set up a designated folder to hold all the associated files, here’s an image of what that directory looks like in Windows Explorer:</p>
<div class="figure"><span id="fig:unnamed-chunk-5"></span>
<img src="images/project_directory_example.png" alt="An example of a file directory for an R project." width="130%" />
<p class="caption">
Figure 2.1: An example of a file directory for an R project.
</p>
</div>
<p>The second to last file in that image “R_for_entomoloists.Rproj” with the little blue cube is the R Project file. I can open that file which immediately loads an R session and sets my working directory to the folder containing the R project. This makes it relatively painless to load in any other files like code, data, or others without having to remember long file paths. Let’s compare how you would read the file “example_buprestid_data.csv” into R without using an R project or a working directory, without using an R project but setting the working directory, and using an R project. (Note: this is all done on a Windows machine, so file paths may look different if you’re using a different operating system.)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load the example csv file into R without using an R project and without first</span>
<span class="co"># setting the working directory. </span>

<span class="kw">read.csv</span>(<span class="st">&quot;C:/Users/wittm094/Google Drive/school_work/grad_school/mini_projects/R_for_entomologists/data/example_buprestid_data.csv&quot;</span>)

<span class="co"># Set the working directory first to the directory with all the files and</span>
<span class="co"># relevant subfolders  and then read the csv file into R</span>
<span class="kw">setwd</span>(<span class="st">&quot;C:/Users/wittm094/Google Drive/school_work/grad_school/mini_projects/R_for_entomologists&quot;</span>)
<span class="kw">read.csv</span>(<span class="st">&quot;data/example_buprestid_data.csv&quot;</span>)

<span class="co"># If I use an R project instead and start R by opening the project file, this is</span>
<span class="co"># all the code I need</span>
<span class="kw">read.csv</span>(<span class="st">&quot;data/example_buprestid_data.csv&quot;</span>)</code></pre></div>
<p>Take a moment to create an R project file in a folder for one of your projects.</p>
<p>Using an R project to help organize our work ends up saving us a line of code, since we don’t have to specify a working directory and it means we don’t have to memorize or find long file directories. The best part of R projects, though, is that it makes it so much easier to share our code! If you send someone the directory containing your R project and all the relevant files, all they have to do is download that directory, open the project file, and R takes care of setting the working directory to be whatever it is on their computer. The other person doesn’t need to to go through and change any directory paths, they can open your code and (assuming your code is functional) run it with no problems.</p>
</div>
<div id="organizing-your-rstudio-project-folder" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Organizing your RStudio Project folder</h3>
<p>So, now that you have your RStudio project folder set up, how should you organize your files within it to help you stay organized? I generally have one folder for each of the following things: data, R code scripts, manuscript/thesis chapter drafts associated with the project, and figures produced in R for the projects. There might be other folders too, like a “images” folder for pictures from the experiment or field sites. Here’s an image of one such directory:</p>
<div class="figure"><span id="fig:unnamed-chunk-7"></span>
<img src="images/example_folders.png" alt="An example of folders within an R project folder." width="130%" />
<p class="caption">
Figure 2.2: An example of folders within an R project folder.
</p>
</div>
</div>
<div id="splitting-up-your-code" class="section level3">
<h3><span class="header-section-number">2.2.3</span> Splitting up your code</h3>
<p>When you first begin writing code, it can be difficult to come up with a coherent system for organizing your code within a script file and to know how many script files you should use. When I first started, my default was to write incredibly long scripts that loaded the data, cleaned the data, analyzed the data, and visualized the data and not necessarily with any clear flow to the script. It was nearly impossible for me to figure out what I had done or remember where I had done it.</p>
<p>These days, I like to have one R script for cleaning my data and saving the output as “cleaned_data.csv” and one script for analyzing my data and producing figures. Depending on the number of analyses and figures being produced, that last file could reasonably be split into two. Within a script, I use Rstudio’s “Insert section” feature to help organize these files (ctrl/cmd + shift + r). This command will insert text into your R script that breaks it up into sections which you can jump between using the menu at the bottom of the script screen. Here’s an example of what I mean (ignore the fact that I didn’t follow the 80 character rule. This script was written before I started following that rule.):</p>
<div class="figure"><span id="fig:unnamed-chunk-8"></span>
<img src="images/example_rcode_sections.png" alt="Using R Studio functionality to split code into chunks that are easy to navigate between." width="130%" />
<p class="caption">
Figure 2.3: Using R Studio functionality to split code into chunks that are easy to navigate between.
</p>
</div>
<p>The menu I have pulled up at the bottom is a list of all the code sections I inserted in bold. If you write custom functions, it also allows me to jump to where those functions were written. You can also see on line 24 of the code where the “Insert Section” feature has inserted a section I named “Data cleaning”. The row of “-” following the title make it easy to find code sections when scrolling through your scripts.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introduction-to-data-cleaning-and-manipulation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": true,
"linkedin": true,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": ["_main.pdf", "_main.epub", "_main.mobi"],
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
