<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>3 Introduction to Data Cleaning and Manipulation | R For Entomologists</title>
  <meta name="description" content="An attempt to push entomologists up the R learning curve and reduce R anxiety.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="3 Introduction to Data Cleaning and Manipulation | R For Entomologists" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/cover.png" />
  <meta property="og:description" content="An attempt to push entomologists up the R learning curve and reduce R anxiety." />
  <meta name="github-repo" content="wittja01/r_for_entomologists" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Introduction to Data Cleaning and Manipulation | R For Entomologists" />
  
  <meta name="twitter:description" content="An attempt to push entomologists up the R learning curve and reduce R anxiety." />
  <meta name="twitter:image" content="images/cover.png" />

<meta name="author" content="Jake Wittman">


<meta name="date" content="2019-02-01">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="organizing-your-work-and-your-code.html">
<link rel="next" href="for-loops.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="organizing-your-work-and-your-code.html"><a href="organizing-your-work-and-your-code.html"><i class="fa fa-check"></i><b>2</b> Organizing Your Work and Your Code</a><ul>
<li class="chapter" data-level="2.1" data-path="organizing-your-work-and-your-code.html"><a href="organizing-your-work-and-your-code.html#style-guides"><i class="fa fa-check"></i><b>2.1</b> Style guides</a><ul>
<li class="chapter" data-level="2.1.1" data-path="organizing-your-work-and-your-code.html"><a href="organizing-your-work-and-your-code.html#spaces"><i class="fa fa-check"></i><b>2.1.1</b> Spaces</a></li>
<li class="chapter" data-level="2.1.2" data-path="organizing-your-work-and-your-code.html"><a href="organizing-your-work-and-your-code.html#long-lines-of-code"><i class="fa fa-check"></i><b>2.1.2</b> Long lines of code</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="organizing-your-work-and-your-code.html"><a href="organizing-your-work-and-your-code.html#organizing-your-work"><i class="fa fa-check"></i><b>2.2</b> Organizing your work</a><ul>
<li class="chapter" data-level="2.2.1" data-path="organizing-your-work-and-your-code.html"><a href="organizing-your-work-and-your-code.html#rstudio-projects"><i class="fa fa-check"></i><b>2.2.1</b> RStudio Projects</a></li>
<li class="chapter" data-level="2.2.2" data-path="organizing-your-work-and-your-code.html"><a href="organizing-your-work-and-your-code.html#organizing-your-rstudio-project-folder"><i class="fa fa-check"></i><b>2.2.2</b> Organizing your RStudio Project folder</a></li>
<li class="chapter" data-level="2.2.3" data-path="organizing-your-work-and-your-code.html"><a href="organizing-your-work-and-your-code.html#splitting-up-your-code"><i class="fa fa-check"></i><b>2.2.3</b> Splitting up your code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html"><i class="fa fa-check"></i><b>3</b> Introduction to Data Cleaning and Manipulation</a><ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#background-required"><i class="fa fa-check"></i><b>3.1</b> Background required</a></li>
<li class="chapter" data-level="3.2" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#lets-get-started"><i class="fa fa-check"></i><b>3.2</b> Let’s get started!</a></li>
<li class="chapter" data-level="3.3" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#the-pipe"><i class="fa fa-check"></i><b>3.3</b> The pipe</a></li>
<li class="chapter" data-level="3.4" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#pipe-examples"><i class="fa fa-check"></i><b>3.4</b> Pipe examples</a></li>
<li class="chapter" data-level="3.5" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#chaining-multiple-functions-together-with-the-pipe"><i class="fa fa-check"></i><b>3.5</b> Chaining multiple functions together with the pipe</a><ul>
<li class="chapter" data-level="3.5.1" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#nesting-multiple-functions"><i class="fa fa-check"></i><b>3.5.1</b> Nesting multiple functions</a></li>
<li class="chapter" data-level="3.5.2" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#saving-every-intermediate-step-without-any-pipes"><i class="fa fa-check"></i><b>3.5.2</b> Saving every intermediate step without any pipes</a></li>
<li class="chapter" data-level="3.5.3" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#using-multiple-pipes"><i class="fa fa-check"></i><b>3.5.3</b> Using multiple pipes</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#dplyr-verbs"><i class="fa fa-check"></i><b>3.6</b> <code>dplyr</code> Verbs</a><ul>
<li class="chapter" data-level="3.6.1" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#selecting-columns-using-select"><i class="fa fa-check"></i><b>3.6.1</b> Selecting columns using <code>select()</code></a></li>
<li class="chapter" data-level="3.6.2" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#filtering-rows-using-filter"><i class="fa fa-check"></i><b>3.6.2</b> Filtering rows using <code>filter()</code></a></li>
<li class="chapter" data-level="3.6.3" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#arranging-your-data-with-arrange"><i class="fa fa-check"></i><b>3.6.3</b> Arranging your data with <code>arrange()</code></a></li>
<li class="chapter" data-level="3.6.4" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#mutating-new-columns-with-mutate"><i class="fa fa-check"></i><b>3.6.4</b> “Mutating” new columns with <code>mutate()</code></a></li>
<li class="chapter" data-level="3.6.5" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#summarising-data-with-summarise"><i class="fa fa-check"></i><b>3.6.5</b> Summarising data with <code>summarise()</code></a></li>
<li class="chapter" data-level="3.6.6" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#grouping-your-data-using-group_by"><i class="fa fa-check"></i><b>3.6.6</b> Grouping your data using <code>group_by()</code></a></li>
<li class="chapter" data-level="3.6.7" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#tidyverse-practice-problems"><i class="fa fa-check"></i><b>3.6.7</b> <code>tidyverse</code> Practice problems</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#modifying-data-with-case_when"><i class="fa fa-check"></i><b>3.7</b> Modifying data with <code>case_when()</code></a><ul>
<li class="chapter" data-level="3.7.1" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#case_when-practice-problem"><i class="fa fa-check"></i><b>3.7.1</b> <code>case_when()</code> practice problem</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="introduction-to-data-cleaning-and-manipulation.html"><a href="introduction-to-data-cleaning-and-manipulation.html#answers-to-practice-questions"><i class="fa fa-check"></i><b>3.8</b> Answers to practice questions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="for-loops.html"><a href="for-loops.html"><i class="fa fa-check"></i><b>4</b> For loops</a><ul>
<li class="chapter" data-level="4.1" data-path="for-loops.html"><a href="for-loops.html#what-is-a-for-loop"><i class="fa fa-check"></i><b>4.1</b> What is a for loop?</a></li>
<li class="chapter" data-level="4.2" data-path="for-loops.html"><a href="for-loops.html#a-brief-detour-into-indexing"><i class="fa fa-check"></i><b>4.2</b> A brief detour into indexing</a></li>
<li class="chapter" data-level="4.3" data-path="for-loops.html"><a href="for-loops.html#c"><i class="fa fa-check"></i><b>4.3</b> C</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>5</b> R Markdown</a><ul>
<li class="chapter" data-level="5.1" data-path="r-markdown.html"><a href="r-markdown.html#headers"><i class="fa fa-check"></i><b>5.1</b> Headers!</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R For Entomologists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction-to-data-cleaning-and-manipulation" class="section level1">
<h1><span class="header-section-number">3</span> Introduction to Data Cleaning and Manipulation</h1>
<div id="background-required" class="section level2">
<h2><span class="header-section-number">3.1</span> Background required</h2>
<p>This document assumes you are comfortable with installing and loading packages, reading data into R as a data.frame, assigning values to objects, and using basic functions like <code>mean()</code> and <code>sum()</code>.</p>
<p>Before we can start, we’ll need to make sure you have the <code>tidyverse</code> package installed. Run the code below to install the package and load it (don’t worry about understanding the code if you don’t, that’s not the point of this tutorial).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(tidyverse)) <span class="kw">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)
<span class="kw">library</span>(tidyverse)</code></pre></div>
</div>
<div id="lets-get-started" class="section level2">
<h2><span class="header-section-number">3.2</span> Let’s get started!</h2>
<p>R is great for statistical analysis if your data are in the right format, but what do you do if you don’t have your data formatted properly to perform say, an ANOVA or a linear regression? You could make an Excel spreadsheet with multiple worksheets, each with a different format of your data. But this may take anyway from hours to days depending on the complexity of your data and the forms you need your data. Thankfully, with R and the tidyverse package you can speed up your data manipulation and cleaning significantly. This document and activity will walk you through some of the most useful tidyverse functions, show you how I’ve used them (or would have, if I’d known about them at the time) in the past, and demonstrate how to make your code more legible. There will also be some opportunities at the end of the document for you to practice what I’m demonstrating. While you’re reading through this document, pay attention to how I’ve written the code. I use a slightly modified version of the Google style guide, so you can use my code as an example of one possible style.</p>
</div>
<div id="the-pipe" class="section level2">
<h2><span class="header-section-number">3.3</span> The pipe</h2>
<p>The pipe will be the first tool in your new R toolbox to help you write human readable code. The pipe operator looks like this <code>%&gt;%</code>, and it may look a little weird and confusing especially to someone new to programming. Before I explain exactly what the pipe means and how it works, I want to draw an analogy between the pipe operator and the assignment operator (<code>&lt;-</code>) while also giving a brief lesson on writing readable code.</p>
<p>You should be familiar with the assignment operator. It’s used to tell R that you want to store something (a number, a vector, a string, a data frame, etc.) with a particular name. You might do something like this:</p>
<p><code>x &lt;- 4</code></p>
<p>You can read this R code as “store 4 in x” or “assign the number 4 to the letter x”. This is a basic application of the assignment operator. Let’s look at a slightly more complicated application.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># The set.seed function is used to make sure our &quot;random&quot; results are consistent.</span>
<span class="co"># Don&#39;t worry if you don&#39;t understand what this function means</span>
<span class="kw">set.seed</span>(<span class="dv">1</span>)
<span class="co"># Randomly sample 10 numbers from the numbers 1 through 10 with replacement</span>
<span class="co"># and store those 10 numbers in the object &quot;x&quot;</span>
x &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">10</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)
<span class="co"># Let&#39;s see what we put in x</span>
x</code></pre></div>
<pre><code>##  [1]  3  4  6 10  3  9 10  7  7  1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Calculate the mean of all the values in x and assign the mean value of x to </span>
<span class="co"># the object &quot;y&quot;</span>
y &lt;-<span class="st"> </span><span class="kw">mean</span>(x)
<span class="co"># Let&#39;s check y to see what the mean of x is</span>
y</code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>In simple (probably overly simple, but that’s okay) language, we randomly picked 10 numbers (using the <code>sample()</code> function) and used the assignment operator to “give” these 10 numbers to x. Then we calculated the mean of these 10 numbers and “gave” those numbers to y. Now, if we wanted we could type x or y into the console in R and return the respective value(s) we “gave” to them.</p>
<p><em>Side note</em>: You can also use <code>=</code> as an assignment operator but you shouldn’t. Most R style guides recommend reserving <code>&lt;-</code> as your assignment operator and using <code>=</code> only within a function to specify arguments for the function.</p>
<p>If you’ve worked in R a little before or have some programming background, you may know that you can also nest functions inside one another. Instead of assigning 10 random numbers to x and then taking the mean of x, we could have just nested the <code>sample()</code> function inside the mean function like so:</p>
<p><code>y &lt;- mean(sample(1:10, 10, replace = TRUE)</code></p>
<p>Much like when performing the order of operations in a math equation containing multiple sets of parentheses, R will start with whatever function is nested the furthest inside and then work out. So the code above, in plain English, reads as “First, sample 10 numbers from the numbers 1 through 10 with replacement, then take the mean of those 10 numbers and store that mean value as y”. This English “translation” is an accurate representation of what R is doing when it reads that code. That is to say, R executes the code in the same order I described it in in English. Now, take a moment and consider the plain English reading of the above code and compare that to how the code is actually written. How do you read the English sentence? How do you read the code?</p>
<p>The code does not read like an English sentence. When we read in English, we read from left to right. In the R code version, we basically end up reading the code from right to left to figure out what order R is working in. A translation that is more faithful to the way the code is actually written might be: “In the object y, we will store the mean of a sample of 10 random numbers between 1 and 10”. This translation doesn’t reflect the order in which R actually reads through the code though (our first translation more accurately reflects the order R works through your code). This results in a mismatch between our expectations as English readers when we are trying to learn to read R code and understand what is happening. Thankfully, the tidyverse has provided us with an operator (the pipe!) to make how we write code match up with our intuitions.</p>
<p>TL;DR: English reads from left to right. When you nest functions in R, you end up needing to read the code more or less from right to left. This does not match our intuitions and can make learning read, write, and understand more difficult. Enter the pipe!</p>
<p>The pipe operator allows us to reorganize our code so that it reads more like English. Instead of nesting functions, we can “pipe” the results of one function to another function. Here’s the piped version of the above code.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">1</span>)
<span class="co"># First sample 10 numbers with replacement between 1 and 10, then take those</span>
<span class="co"># numbers and give them to the mean function to find the mean.</span>
<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">10</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mean</span>()</code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>Now, our code lines up with both our expectations for how it should be read (left to right) and how R will execute the code (and if you compare the answer we got for the mean in both examples, you’ll see they’re the same)! First, R will sample 10 numbers from between 1 and 10, then it will “pipe” those ten numbers to the mean function, which will calculate the mean of those 10 numbers. Let’s look at a few more examples of the pipe in action and then there will be a few problems you can work through to practice using the pipe.</p>
<p><em>Side note</em>: You may be confused about the difference between the assignment operator <code>&lt;-</code> and the pipe <code>%&gt;%</code> because of some of the plain English used above. The assignment operator is used to tell R to associate an object name (the variables <code>x</code> or <code>y</code> above) with something else (in our case, a sample of 10 numbers and a mean, respectively). By using the assignment operator you create a permanent association between the object <code>x</code> and the sample of 10 numbers (at least until you remove x from your environment, or reassign x to some other object). The pipe operator does not create any such association. All the pipe operator does is take an object, or the output from a function, and “sends” it to another function to use. You cannot pipe one object to another object, you’ll get an error. If you want to save the output from a function in a pipe chain, you have to use the assignment operator (I’ll cover this later).</p>
</div>
<div id="pipe-examples" class="section level2">
<h2><span class="header-section-number">3.4</span> Pipe examples</h2>
<p>You’ve been measuring the hind tibia length of 20 <em>Cerceris</em> wasps and you want to know the mean, median, and standard deviation. In the below, we’ll generate some random values for hind tibia length and then use the pipe to get the outputs we want. (The <code>rnorm</code> function is used to generate random values from a normal distribution.)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get 20 random samples from a normal distribution with mean 12 and standard</span>
<span class="co"># deviation 3.</span>
hind_tibia_length &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">20</span>, <span class="dt">mean =</span> <span class="dv">12</span>, <span class="dt">sd =</span> <span class="dv">3</span>)

<span class="co"># Let&#39;s pipe our data to our data summary functions</span>

<span class="co"># Mean</span>
hind_tibia_length <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mean</span>()</code></pre></div>
<pre><code>## [1] 12.53554</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Median</span>
hind_tibia_length <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">median</span>()</code></pre></div>
<pre><code>## [1] 13.59482</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Standard deviation</span>
hind_tibia_length <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sd</span>()</code></pre></div>
<pre><code>## [1] 2.916807</code></pre>
<p>In our three examples, we’ve piped our data to three different functions to get different summaries. Later, I’ll show you how to more efficiently produce these summary results. Now, what do we do if we want to assign our summary output to an object, like when we assigned <code>y &lt;- mean(x)</code>? The code to do that would look like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Save mean output</span>
mean_tibia_length &lt;-<span class="st"> </span>hind_tibia_length <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mean</span>()
<span class="co"># Check that it matches our output from earlier</span>
mean_tibia_length</code></pre></div>
<pre><code>## [1] 12.53554</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Save median output</span>
median_tibia_length &lt;-<span class="st"> </span>hind_tibia_length <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">median</span>()
<span class="co"># Check that it matches our output from earlier</span>
median_tibia_length</code></pre></div>
<pre><code>## [1] 13.59482</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Save sd output</span>
sd_tibia_length &lt;-<span class="st"> </span>hind_tibia_length <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sd</span>()
<span class="co"># Check that it matches our output from earlier</span>
sd_tibia_length</code></pre></div>
<pre><code>## [1] 2.916807</code></pre>
<p>This might be confusing at first. Didn’t I just say that we want to try to write code that reads like English and also reflects the order in which R will execute the code? Isn’t storing our output in the object the last thing R would do? Why are we putting that first in our code? We sacrifice a little bit of intuitive readability here to speed up our work flow as we write more lines of code. In my experience, I’ve found that I spend more time referencing the objects I’ve saved some output as (“what did I call that again?”, “where did I calculate that?”, etc.) than re-reading exactly what I did. Think of the assignment operator as a placeholder dividing your code into two separate sides, left of the assignment operator and right of the assignemnt operator. By putting the object I’ve saved something as on the left side, it makes it easier for me to find it again in the code or quickly scan what I’ve written to see my output. The readability of what you did on the right hand side of the assignment operator becomes important when you’re returning to code you wrote a long time ago or are sharing code with someone who is looking at it for the first time. This arrangement strikes a balance between your needs while writing code, and your’s or someone else’s needs when looking at the code later.</p>
<p><em>Side note</em>: The pipe operator <code>%&gt;%</code> can be kind of frustrating to type. Thankfully there’s a keyboard shortcut for it in R Studio! If you’re using a Windows machine use <strong>ctrl + shift + m</strong> to insert the pipe operator. While we’re at it, there’s a shortcut for the assignment operator <code>&lt;-</code> too! Again, on a Windows machine type <strong>alt + -</strong>. (Sorry, I don’t know the Mac OS shortcuts. A google search might help?)</p>
</div>
<div id="chaining-multiple-functions-together-with-the-pipe" class="section level2">
<h2><span class="header-section-number">3.5</span> Chaining multiple functions together with the pipe</h2>
<p>You can use the pipe operator to link multiple functions together, which is often useful when summarizing data. Here’s a brief example. I’ll briefly explain what these functions do if you haven’t seen them before, but we’ll cover them in more depth in a bit. In this example, I’ll show you three methods of achieving the same result to highlight again why pipes are useful or preferred over other methods. The first method will nest multiple functions to avoid saving unneeded intermediate objects while still not using pipes.In the second method, we’ll save every intermediate step as an object on our way to our final goal without using any pipes. The final method will use pipes.</p>
<p>In this example, we’re using the <code>iris</code> dataset that is built into R. If you type <code>iris</code> into your console, it’ll print out the dataset. This data has observations on sepal length and width and petal length and width for three different species of irises. This example is a little contrived, but it illustrates my point. Imagine you want to take the iris data set and are interested in only the data on <em>Iris setosa</em>. Furthermore, you don’t care about anything but the sepal length of <em>Iris setosa</em>. And for some reason, you want the data ordered from shortest sepal length to longest sepal length for <em>Iris setosa</em>. Here are three ways you could accomplish this using dplyr verbs that let you <strong>filter</strong> your data based on certain criteria, <strong>select</strong> particular columns from your data, and <strong>arrange</strong> the data according to a certain variable:</p>
<div id="nesting-multiple-functions" class="section level3">
<h3><span class="header-section-number">3.5.1</span> Nesting multiple functions</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nested_sepal_length &lt;-<span class="st"> </span><span class="kw">arrange</span>(<span class="kw">select</span>(<span class="kw">filter</span>(iris, Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span>), Sepal.Length), Sepal.Length)</code></pre></div>
</div>
<div id="saving-every-intermediate-step-without-any-pipes" class="section level3">
<h3><span class="header-section-number">3.5.2</span> Saving every intermediate step without any pipes</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">setosa_iris &lt;-<span class="st"> </span><span class="kw">filter</span>(iris, Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span>)
sepal_length &lt;-<span class="st"> </span><span class="kw">select</span>(setosa_iris, Sepal.Length)
intermediate_sepal_length &lt;-<span class="st"> </span><span class="kw">arrange</span>(sepal_length, Sepal.Length)</code></pre></div>
</div>
<div id="using-multiple-pipes" class="section level3">
<h3><span class="header-section-number">3.5.3</span> Using multiple pipes</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">piped_sepal_length &lt;-<span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">filter</span>(Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">select</span>(Sepal.Length) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">arrange</span>(Sepal.Length)

<span class="co"># Let&#39;s compare our three data sets to see if they&#39;re all the same. This</span>
<span class="co"># function will return the value TRUE if the two objects called within are</span>
<span class="co"># identical.</span>
<span class="kw">identical</span>(intermediate_sepal_length, nested_sepal_length)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">identical</span>(intermediate_sepal_length, piped_sepal_length)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">identical</span>(nested_sepal_length, piped_sepal_length)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Based on the pairwise comparisons of our three data frames, all three methods produced the same object. So which is the best? You’ll probably have guessed that I’ll say the pipe method is the best and you’ll be right. Let’s start by comparing the piped method to our nested function.</p>
<p>First, let’s compare the pipes to our nested function method. Earlier we saw an example of nesting one function within another; that example wasn’t <em>that</em> hard to read if we really had to. I find the example at hand with three nested functions, each with their own extra arguments, much harder to decipher. As I mentioned before, with nested functions you have to read in a way that is counter-intuitive to the way we usually read. The pipes eliminate that problem, allowing us to read our code in a more natural manner, reducing our intellectual overhead.</p>
<p>Now, let’s compare the piped method to our intemediate steps method. Look at the functions filter, select, and arrange in each of the two examples we’re focusing on. You might notice that in the intermediate steps example, each of those three functions has two arguments: the first is the data frame being used and the second specifies what part of the data frame on which the action should be performed. Why do the functions in the piped example not need to specify what data is being used? The pipe operator essentially takes care of informing the next function what data is being used. Convention for <em>most</em>, but not all, R functions is for the first argument to specify what data is being used. The pipe takes advantage of that fact and takes care of the work of specifying the first argument for you, which saves you some typing time and space. The pipes are also useful because you don’t end up with a lot of intermediate objects that you might not use again. Pipes keep your programming environment clean by eliminating many one-use objects which in turn makes it easier to remember what objects you need for specific tasks.</p>
<p>I’ve presented the code in order of what I find least preferred to most preferred. Avoid the temptation to nest functions whenever possible, although sometimes nesting 1 function within another is ok (all rules are meant to be broken, right?) if the two functions aren’t too complex. Also, you’ll find that sometimes it makes sense to break up a pipeline (multiple functions piped together) into smaller pipelines. Don’t feel like you need to construct incredibly long, elaborate pipelines. Do what works best for the problems you are trying to address and what makes your code easiest to read.</p>
<p>That’s the pipe! It’s a powerful tool for making more legible code, which will make your life and potential collaborator’s lives easier. You’ll get some practice using the pipe once we’ve covered more of the functions provided by the tidyverse for manipulating data.</p>
</div>
</div>
<div id="dplyr-verbs" class="section level2">
<h2><span class="header-section-number">3.6</span> <code>dplyr</code> Verbs</h2>
<p><code>dplyr</code> is a package in the <code>tidyverse</code> that provides most of the functions we’ll use when manipulating and cleaning our data. As long as you have the <code>tidyverse</code> package loaded, you’ll have <code>dplyr</code> loaded too. Many of the functions in <code>dplyr</code> and the <code>tidyverse</code> as a whole are named as verbs that describe the action they perform. This is a wonderful design feature as it further reduces intellectual overhead required by you when learning new functions or recalling what function to use. Need to filter your data by some critera? Use the <code>filter()</code> function. Your data frame contains data from different experimental groups that you need separate summaries for? Use the <code>group_by()</code> function and then the <code>summarise()</code> function.</p>
<p><em>Side note</em>: When referencing data in this tutorial, I often refer to it as a “data frame”. A data frame is a special type of object in R that is analagous to a spreadsheet; basically, it’s just an object used to store data in named columns. You may notice that many of the <code>dplyr</code> functions we use return what is called a “tibble”. A “tibble” is just the tidyverse version of a data frame. If you’ve worked with data frames before in R, many of the same operations you would do with a data frame will also work on a tibble. However, if the tibble thing is throwing you off, it’s pretty simple to convert a tibble back to a data frame using <code>as.data.frame()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Here imagine we use filter on our data frame named data and save it as an</span>
<span class="co"># object called &quot;some_tibble&quot;. Because we used a dplyr verb, the output is a </span>
<span class="co"># tibble.</span>
some_tibble &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>()

<span class="co"># Now, use as.data.frame() on some_tibble) and assign it to an object. This </span>
<span class="co"># object can have the same name as your tibble or you can rename it to something</span>
<span class="co"># new, as in this example.</span>
some_data_frame &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(some_tibble)</code></pre></div>
<p>Let’s dive in. For these examples we’ll be using some slightly modified data of Buprestid collection records in the state of Minnesota. The records in this data are all true (thanks Marie!) but I’ve added a few columns of artificial data to help illustrate the usefulness of some of the functions we’ll use. Here are the first 10 rows of the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Import our data from the data folder in this project</span>
<span class="co"># Because we&#39;re using an R studio project, R automatically sets the working </span>
<span class="co"># directory to the folder our R project is stored in, so we don&#39;t have to set</span>
<span class="co"># our working directory or type a really long file name. The &quot;.&quot; in the filename</span>
<span class="co"># is a shortcut for the name of our working directory.</span>
buprestid_data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;./data/example_buprestid_data.csv&quot;</span>)
<span class="kw">head</span>(buprestid_data, <span class="dt">n =</span> <span class="dv">10</span>)</code></pre></div>
<pre><code>##     X   scientificname       county n recent_collect_date recent_id_date
## 1   1 Acmaeodera acuta       aitkin 0                  NA             NA
## 2   2 Acmaeodera acuta        anoka 0                  NA             NA
## 3   3 Acmaeodera acuta anoka/isanti 0                  NA             NA
## 4   4 Acmaeodera acuta aonka/isanti 0                  NA             NA
## 5   5 Acmaeodera acuta       becker 0                  NA             NA
## 6   6 Acmaeodera acuta     beltrami 0                  NA             NA
## 7   7 Acmaeodera acuta       benton 0                  NA             NA
## 8   8 Acmaeodera acuta    big stone 0                  NA             NA
## 9   9 Acmaeodera acuta   blue earth 0                  NA             NA
## 10 10 Acmaeodera acuta        brown 0                  NA             NA
##    mass length
## 1    NA     NA
## 2    NA     NA
## 3    NA     NA
## 4    NA     NA
## 5    NA     NA
## 6    NA     NA
## 7    NA     NA
## 8    NA     NA
## 9    NA     NA
## 10   NA     NA</code></pre>
<p>There are 8 columns in this dataset. The first column, X, appears to be an artifact from the csv file and is just a column for row numbers. There are columns for the scientific name of the beetle, the county, the number of that species caught in that county, the most recent collection date, and the most recent identification date. I’ve added two columns of simulated data: one for the dry mass of the most recent beetle caught and one for the length of the most recent beetle caught. Don’t mistake these columns for real data and try to draw any conclusions from them. They’re just a bunch of randomly generated numbers.</p>
<div id="selecting-columns-using-select" class="section level3">
<h3><span class="header-section-number">3.6.1</span> Selecting columns using <code>select()</code></h3>
<p>The select function can be used to reduce the number of columns in a data frame if you find your data set has more columns than needed for your current analysis. Let’s see a couple examples. First, lets say I just want the columns for scientific name, county, mass, and length.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Be sure to assign your new data frame to a name that isn&#39;t the same as the one</span>
<span class="co"># you&#39;re editing or you&#39;ll overwrite the one you&#39;re working with.</span>
mass_length_buprestids &lt;-<span class="st"> </span>buprestid_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">select</span>(scientificname, mass, length)

<span class="kw">head</span>(mass_length_buprestids)</code></pre></div>
<pre><code>##     scientificname mass length
## 1 Acmaeodera acuta   NA     NA
## 2 Acmaeodera acuta   NA     NA
## 3 Acmaeodera acuta   NA     NA
## 4 Acmaeodera acuta   NA     NA
## 5 Acmaeodera acuta   NA     NA
## 6 Acmaeodera acuta   NA     NA</code></pre>
<p>Now we’ve got a data frame with just the three columns we’re interested in! This works well if you have a lot of columns and you want to reduce your data frame down to just a few. What if you have a lot of columns and only need to remove a few? You can still use select for that! Let’s go back to our original data frame and remove that superfluous X column</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Because we won&#39;t need the X column at all in the future, we can overwrite the</span>
<span class="co"># object we originally stored our data frame in.</span>
buprestid_data &lt;-<span class="st"> </span>buprestid_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">select</span>(<span class="op">-</span>X)</code></pre></div>
<p>By placing the <code>-</code> operator before the column name “X”, we tell the select function that we want every column except X. You could add more column names with a <code>-</code> before them to remove additional columns. If you have a lot of columns you want to select that are all adjacent to one another, you can use the <code>:</code> operator to save some typing. We can use this to select the columns from scientific name through recent_id_date.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">first_4_cols_buprestid &lt;-<span class="st"> </span>buprestid_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">select</span>(scientificname<span class="op">:</span>recent_id_date)

<span class="kw">head</span>(first_4_cols_buprestid)</code></pre></div>
<pre><code>##     scientificname       county n recent_collect_date recent_id_date
## 1 Acmaeodera acuta       aitkin 0                  NA             NA
## 2 Acmaeodera acuta        anoka 0                  NA             NA
## 3 Acmaeodera acuta anoka/isanti 0                  NA             NA
## 4 Acmaeodera acuta aonka/isanti 0                  NA             NA
## 5 Acmaeodera acuta       becker 0                  NA             NA
## 6 Acmaeodera acuta     beltrami 0                  NA             NA</code></pre>
<p>The <code>:</code> operator allowed us to select all the columns between scientific name and recent_id_date without typing any additional column names. As a reminder, this only works if the columns you want to select are adjacent to each other. You can use a combination of the <code>:</code> operator with individual column names if you need to select some columns that are adjacent and some that are not.</p>
<p><em>Reminder</em>: Remember that once you pipe your data to a dplyr function, you don’t need to specify the name of the data frame again. In <code>select()</code> we just wrote the name of the column with no mention of the data frame. You might be used to writing something like <code>buprestid_data$scientificname</code> to reference a specific column in a data set.</p>
</div>
<div id="filtering-rows-using-filter" class="section level3">
<h3><span class="header-section-number">3.6.2</span> Filtering rows using <code>filter()</code></h3>
<p>While <code>select()</code> allowed us to pick out certain columns from our data set, <code>filter()</code> will allow us to reduce the number of rows based on particular criteria. For instance, maybe we want to get a data set of just the collection records in Ramsey county in Minnesota.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ramsey_co_buprestids &lt;-<span class="st"> </span>buprestid_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">filter</span>(county <span class="op">==</span><span class="st"> &quot;ramsey&quot;</span>)

<span class="kw">head</span>(ramsey_co_buprestids)</code></pre></div>
<pre><code>##           scientificname county n recent_collect_date recent_id_date mass
## 1       Acmaeodera acuta ramsey 0                  NA             NA   NA
## 2      Acmaeodera alicia ramsey 0                  NA             NA   NA
## 3 Acmaeodera amplicollis ramsey 0                  NA             NA   NA
## 4    Acmaeodera angelica ramsey 0                  NA             NA   NA
## 5   Acmaeodera bowditchi ramsey 0                  NA             NA   NA
## 6     Acmaeodera connexa ramsey 0                  NA             NA   NA
##   length
## 1     NA
## 2     NA
## 3     NA
## 4     NA
## 5     NA
## 6     NA</code></pre>
<p>Based on the preview of our data set, we can see that we’ve now only selected the rows that have “ramsey” as the value for county. Filter uses the basic logic functions built into R, so you’ll want to familarize yourself with those. In brief, you can read <code>==</code> as “is equal to”. The filter function in this example is combing through our data and looking for all instances where the value of the county column is equal to “ramsey” and selecting only those rows. You can also use <code>!=</code>, which means “is not equal to”. We could have written <code>filter(county != &quot;ramsey&quot;)</code> to remove all observations from Ramsey county from our data set. (<em>Side note</em>: these are referred to as logical operators).</p>
<p>The <code>==</code> and <code>!=</code> logical operators are useful when you have categorical data or need a specific value of a numeric variable (for example, you might want <code>mass == 10</code>). You can also use <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, and <code>&lt;=</code> to get numeric values greater than, greater than or equal to, less than, or less than or equal to, respectively. Maybe we want to filter our data so we remove any observations where no buprestids were observed.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">positive_buprestid_counts &lt;-<span class="st"> </span>buprestid_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">filter</span>(n <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)

<span class="kw">head</span>(positive_buprestid_counts)</code></pre></div>
<pre><code>##         scientificname    county  n recent_collect_date recent_id_date
## 1 Acmaeodera pulchella     anoka  1                1932           1938
## 2 Acmaeodera pulchella   chisago 17                1969             NA
## 3 Acmaeodera pulchella faribault  1                1910           1922
## 4 Acmaeodera pulchella  hennepin  2                1938           1943
## 5 Acmaeodera pulchella  le sueur  1                1922           1928
## 6 Acmaeodera pulchella  morrison  3                1920           1928
##       mass   length
## 1 66.81645 66.81645
## 2 43.66621 43.66621
## 3 49.24207 49.24207
## 4 65.25690 65.25690
## 5 73.63759 73.63759
## 6 76.53053 76.53053</code></pre>
<p>You can also chain together multiple logical arguments to further reduce a dataset. In this example we’re interested in finding any beetles that we have more than two specimens of from Ramsey county.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ramsey_co_positive_buprestids &lt;-<span class="st"> </span>buprestid_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">filter</span>(n <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> <span class="op">&amp;</span><span class="st"> </span>county <span class="op">==</span><span class="st"> &quot;ramsey&quot;</span>)

<span class="kw">head</span>(ramsey_co_positive_buprestids)</code></pre></div>
<pre><code>##         scientificname county  n recent_collect_date recent_id_date
## 1 Acmaeodera pulchella ramsey  4                  NA             NA
## 2    Actenodes acornis ramsey  3                2017           2017
## 3     Agrilus arcuatus ramsey 10                  NA             NA
## 4   Agrilus bilineatus ramsey  4                2017           2017
## 5   Agrilus difficilis ramsey 19                2017           2017
## 6       Agrilus egenus ramsey  3                1952             NA
##       mass   length
## 1 38.31272 38.31272
## 2 60.86979 60.86979
## 3 69.61334 69.61334
## 4 46.94469 46.94469
## 5 36.88816 36.88816
## 6 43.82500 43.82500</code></pre>
<p>The <code>&amp;</code> operator does what you might guess it does: in this use of <code>filter()</code> we’re asking R for only rows that have values of n greater than 0 AND the county is “ramsey”. You can also use the <code>|</code> operator to link two statements. The <code>|</code> operator reads as “or”. (Sometimes <code>|</code> is confusingly referred to as a pipe. In this document I’ll only reference it as <code>|</code>, not pipe, to avoid confusion.) A researcher in the Twin Cities might be interested in beetle records for both Hennepin and Ramsey counties. They could filter the data so:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ramsey_hennepin_buprestids &lt;-<span class="st"> </span>buprestid_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">filter</span>(county <span class="op">==</span><span class="st"> &quot;ramsey&quot;</span> <span class="op">|</span><span class="st"> </span>county <span class="op">==</span><span class="st"> &quot;hennepin&quot;</span>)

<span class="kw">head</span>(ramsey_hennepin_buprestids)</code></pre></div>
<pre><code>##           scientificname   county n recent_collect_date recent_id_date
## 1       Acmaeodera acuta hennepin 0                  NA             NA
## 2       Acmaeodera acuta   ramsey 0                  NA             NA
## 3      Acmaeodera alicia hennepin 0                  NA             NA
## 4      Acmaeodera alicia   ramsey 0                  NA             NA
## 5 Acmaeodera amplicollis hennepin 0                  NA             NA
## 6 Acmaeodera amplicollis   ramsey 0                  NA             NA
##   mass length
## 1   NA     NA
## 2   NA     NA
## 3   NA     NA
## 4   NA     NA
## 5   NA     NA
## 6   NA     NA</code></pre>
<p>This code asks R for only rows that have either “ramsey” or “hennepin” in the county column. You can use the logical operators to chain together complicated logical statements to hone in on exactly the rows you want.</p>
</div>
<div id="arranging-your-data-with-arrange" class="section level3">
<h3><span class="header-section-number">3.6.3</span> Arranging your data with <code>arrange()</code></h3>
<p><code>arrange()</code> can be used to reorder your data frame. This isn’t something I often use in R, because few functions that I can think of require your data to be arranged in a certain way before using them, but it can be useful if you’re trying to look through your data. It’s also much nicer than trying to sort your data in Excel or another spreadsheet program as there is no danger of accidently sorting some data and not others, resulting in a data catastrophe. Let’s tell R that we want to rearrange our data so it’s sorted by county.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># It&#39;s okay to overwrite our object here because the only thing we&#39;re doing is</span>
<span class="co"># rearranging our data, not editing it.</span>
buprestid_data &lt;-<span class="st"> </span>buprestid_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">arrange</span>(county)

<span class="kw">head</span>(buprestid_data)</code></pre></div>
<pre><code>##           scientificname county n recent_collect_date recent_id_date mass
## 1       Acmaeodera acuta aitkin 0                  NA             NA   NA
## 2      Acmaeodera alicia aitkin 0                  NA             NA   NA
## 3 Acmaeodera amplicollis aitkin 0                  NA             NA   NA
## 4    Acmaeodera angelica aitkin 0                  NA             NA   NA
## 5   Acmaeodera bowditchi aitkin 0                  NA             NA   NA
## 6     Acmaeodera connexa aitkin 0                  NA             NA   NA
##   length
## 1     NA
## 2     NA
## 3     NA
## 4     NA
## 5     NA
## 6     NA</code></pre>
<p>Now our data are sorted alphabetically by county! If you want to reverse the order, you just need to use the <code>desc()</code> function with <code>arrange()</code> (one of a few instances where it’s alright to nest functions! We couldn’t use the pipe here anyway). Let’s sort by reverse alphabetical order of scientific name.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">buprestid_data &lt;-<span class="st"> </span>buprestid_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">arrange</span>(<span class="kw">desc</span>(scientificname))

<span class="kw">head</span>(buprestid_data)</code></pre></div>
<pre><code>##      scientificname       county n recent_collect_date recent_id_date mass
## 1 Brachys Floricola       aitkin 0                  NA             NA   NA
## 2 Brachys Floricola        anoka 0                  NA             NA   NA
## 3 Brachys Floricola anoka/isanti 0                  NA             NA   NA
## 4 Brachys Floricola aonka/isanti 0                  NA             NA   NA
## 5 Brachys Floricola       becker 0                  NA             NA   NA
## 6 Brachys Floricola     beltrami 0                  NA             NA   NA
##   length
## 1     NA
## 2     NA
## 3     NA
## 4     NA
## 5     NA
## 6     NA</code></pre>
<p>You can provide additional columns to <code>arrange()</code> if you want to sort by more than one column. Maybe we want to sort first by most recent collection date descending, then by county.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">buprestid_data &lt;-<span class="st"> </span>buprestid_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">arrange</span>(<span class="kw">desc</span>(recent_collect_date), county)

<span class="kw">head</span>(buprestid_data)</code></pre></div>
<pre><code>##             scientificname  county  n recent_collect_date recent_id_date
## 1   Agrilus quadriguttatus chisago 10                2017           2017
## 2           Agrilus pensus chisago  1                2017           2017
## 3 Agrilus obsoletoguttatus chisago 12                2017           2017
## 4          Agrilus liragus chisago  2                2017             NA
## 5       Agrilus granulatus chisago 21                2017           2017
## 6          Agrilus carpini chisago  4                2017           2017
##       mass   length
## 1 51.70299 51.70299
## 2 50.79876 50.79876
## 3 77.85798 77.85798
## 4 77.39962 77.39962
## 5 44.11903 44.11903
## 6 78.54273 78.54273</code></pre>
</div>
<div id="mutating-new-columns-with-mutate" class="section level3">
<h3><span class="header-section-number">3.6.4</span> “Mutating” new columns with <code>mutate()</code></h3>
<p>This is where we start to have some real fun! The <code>mutate()</code> function allows us to take existing data and derive other variables from it. To create a new variable, you need to supply a name for the variable and then tell <code>mutate()</code> what the new variable will be equal to. For example, in this data let’s say the mass variable is recorded in grams. Maybe we want to convert this to kilograms. For this example, we’ll work with the positive counts data set so we have mass and length records to work with instead of <code>NA</code> values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># We can overwrite our original positive_buprestid_counts object becuase we&#39;re just adding</span>
<span class="co"># a new column, not doing anything to existing columns. We could also save it as</span>
<span class="co"># a new object if we wanted to.</span>
positive_buprestid_counts &lt;-<span class="st"> </span>positive_buprestid_counts <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">mutate</span>(<span class="dt">mass_kg =</span> mass <span class="op">/</span><span class="st"> </span><span class="dv">1000</span>)

<span class="kw">head</span>(positive_buprestid_counts)</code></pre></div>
<pre><code>##         scientificname    county  n recent_collect_date recent_id_date
## 1 Acmaeodera pulchella     anoka  1                1932           1938
## 2 Acmaeodera pulchella   chisago 17                1969             NA
## 3 Acmaeodera pulchella faribault  1                1910           1922
## 4 Acmaeodera pulchella  hennepin  2                1938           1943
## 5 Acmaeodera pulchella  le sueur  1                1922           1928
## 6 Acmaeodera pulchella  morrison  3                1920           1928
##       mass   length    mass_kg
## 1 66.81645 66.81645 0.06681645
## 2 43.66621 43.66621 0.04366621
## 3 49.24207 49.24207 0.04924207
## 4 65.25690 65.25690 0.06525690
## 5 73.63759 73.63759 0.07363759
## 6 76.53053 76.53053 0.07653053</code></pre>
<p>You can see we now have our original mass column in grams and a new mass_kg column. (You may need to click the arrow in the display table to see the additional column.)</p>
<p>You can create multiple new columns by providing additional arguments to the <code>mutate()</code> function. Let’s say our length variable is recorded in millimeters and lets convert that to centimeters. Let’s also multiply length and mass to get an index variable for “size”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">positive_buprestid_counts &lt;-<span class="st"> </span>positive_buprestid_counts <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">mutate</span>(<span class="dt">length_cm =</span> length <span class="op">/</span><span class="st"> </span><span class="dv">10</span>,
          <span class="dt">size_index =</span> mass <span class="op">*</span><span class="st"> </span>length)

<span class="kw">head</span>(positive_buprestid_counts)</code></pre></div>
<pre><code>##         scientificname    county  n recent_collect_date recent_id_date
## 1 Acmaeodera pulchella     anoka  1                1932           1938
## 2 Acmaeodera pulchella   chisago 17                1969             NA
## 3 Acmaeodera pulchella faribault  1                1910           1922
## 4 Acmaeodera pulchella  hennepin  2                1938           1943
## 5 Acmaeodera pulchella  le sueur  1                1922           1928
## 6 Acmaeodera pulchella  morrison  3                1920           1928
##       mass   length    mass_kg length_cm size_index
## 1 66.81645 66.81645 0.06681645  6.681645   4464.438
## 2 43.66621 43.66621 0.04366621  4.366621   1906.738
## 3 49.24207 49.24207 0.04924207  4.924207   2424.781
## 4 65.25690 65.25690 0.06525690  6.525690   4258.463
## 5 73.63759 73.63759 0.07363759  7.363759   5422.494
## 6 76.53053 76.53053 0.07653053  7.653053   5856.923</code></pre>
<p>Now there are two more columns! Mutate makes it very easy to add new columns based on existing data</p>
</div>
<div id="summarising-data-with-summarise" class="section level3">
<h3><span class="header-section-number">3.6.5</span> Summarising data with <code>summarise()</code></h3>
<p>We can use <code>summarise()</code> to produce quick and easy summaries of our data. The <code>summarise()</code> function works similarly to <code>mutate()</code> in that you have to provide a name for your summary column and then tell the function how it calculates that value. Let’s summarise our count data from the buprestid data by producing a summary table with mean count, median count, number of counts, standard deviation, and the coefficient of variation (standard deviation / mean, this is another measure of how variable our data is like standard deviation but relative to the mean of our data).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">buprestid_summary &lt;-<span class="st"> </span>buprestid_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="co"># We have to tell the function what variable to use to calculate the summary</span>
<span class="st">   </span><span class="co"># variable. In our buprestid_data, the variable n is the count data.</span>
<span class="st">   </span><span class="kw">summarise</span>(<span class="dt">mean_count =</span> <span class="kw">mean</span>(n),
             <span class="dt">median_count =</span> <span class="kw">median</span>(n),
             <span class="dt">num_observations =</span> <span class="kw">n</span>(),
             <span class="dt">stdev_count =</span> <span class="kw">sd</span>(n),
             <span class="dt">coef_var =</span> <span class="kw">sd</span>(n) <span class="op">/</span><span class="st"> </span><span class="kw">mean</span>(n))

buprestid_summary</code></pre></div>
<pre><code>##   mean_count median_count num_observations stdev_count coef_var
## 1 0.08235392            0            11997    1.210113 14.69406</code></pre>
<p>Now the object buprestid_summary returns a one row table with all of our summary data! We used a new function <code>n()</code> to get this summary data. The <code>n()</code> function is a special dplyr function that doesn’t take any arguments, it automatically knows that you want to use it to count up the number of observations in your data. Becuase we’re summarizing our whole dataset, this is just equal to the number of rows in our data.</p>
<p>Sometimes you may run into issues when using summarise if your data contain <code>NA</code> values or you are using functions that require additional arguments beyond just the data for them to work. For example, say we wanted to summarise the mean dry mass and length of our full buprestid data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mass_length_summary &lt;-<span class="st"> </span>buprestid_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">summarise</span>(<span class="dt">mean_mass =</span> <span class="kw">mean</span>(mass),
             <span class="dt">mean_length =</span> <span class="kw">mean</span>(length))

mass_length_summary</code></pre></div>
<pre><code>##   mean_mass mean_length
## 1        NA          NA</code></pre>
<p>Hmm, shoot. We get <code>NA</code> values for our means. This is because when there are no records for a beetle in a county, they can’t have a mass or a length so instead there is an <code>NA</code> observation there. The mean function (as well as other functions, like the standard deviation function) don’t know what to do with <code>NA</code> values unless we tell them. To handle these <code>NA</code> values, we have to tell R to remove them with the <code>na.rm = TRUE</code> argument that can be provided to <code>mean()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mass_length_summary &lt;-<span class="st"> </span>buprestid_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">summarise</span>(<span class="dt">mean_mass =</span> <span class="kw">mean</span>(mass, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
             <span class="dt">mean_length =</span> <span class="kw">mean</span>(length, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))

mass_length_summary</code></pre></div>
<pre><code>##   mean_mass mean_length
## 1  56.70475    56.70475</code></pre>
<p>Here you can see we succesfully returned mean values for these two variables. If you’re mutating or summarising data and need to provide additional arguments to the function, you add them on just like you would normally.</p>
<p>So <code>summarise()</code> is a great tool for quickly getting summary data, but what if we have different groups in our data we want separate summaries for? Maybe we want to know the mean count for each county in Minnesota. Well, there’s a function for that!</p>
</div>
<div id="grouping-your-data-using-group_by" class="section level3">
<h3><span class="header-section-number">3.6.6</span> Grouping your data using <code>group_by()</code></h3>
<p>The <code>group_by()</code> function can be used to tell R what variable it should use to group your data with and this can be paired with <code>summarise()</code> to produce summaries for each group. Let’s calculate the same summary table as before but this time produce a separate row for each county in the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">county_summary &lt;-<span class="st"> </span>buprestid_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">group_by</span>(county) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">summarise</span>(<span class="dt">mean_count =</span> <span class="kw">mean</span>(n),
             <span class="dt">median_count =</span> <span class="kw">median</span>(n),
             <span class="dt">num_observations =</span> <span class="kw">n</span>(),
             <span class="dt">stdev_count =</span> <span class="kw">sd</span>(n),
             <span class="dt">coef_var =</span> <span class="kw">sd</span>(n) <span class="op">/</span><span class="st"> </span><span class="kw">mean</span>(n))

county_summary</code></pre></div>
<pre><code>## # A tibble: 93 x 6
##    county     mean_count median_count num_observations stdev_count coef_var
##    &lt;fct&gt;           &lt;dbl&gt;        &lt;int&gt;            &lt;int&gt;       &lt;dbl&gt;    &lt;dbl&gt;
##  1 aitkin        0                  0              129      0        NaN   
##  2 anoka         0.721              0              129      3.82       5.30
##  3 anoka/isa~    0.0698             0              129      0.562      8.05
##  4 aonka/isa~    0.116              0              129      1.32      11.4 
##  5 becker        0                  0              129      0        NaN   
##  6 beltrami      0.00775            0              129      0.0880    11.4 
##  7 benton        0                  0              129      0        NaN   
##  8 big stone     0.0155             0              129      0.176     11.4 
##  9 blue earth    0                  0              129      0        NaN   
## 10 brown         0                  0              129      0        NaN   
## # ... with 83 more rows</code></pre>
<p>Easy! All we had to do was add one additional line of code. You’ll notice in the coefficient of variation variable we have some <code>NaN</code> values. This is because we had a mean count of 0 in those counties and you can’t divide by 0.</p>
<p>If you have a dataset with multiple levels of grouping, you can pass additional arguments to <code>group_by</code> to do hierarchical grouping and produce summaries for all your different levels. We’ll use a different dataset to demonstrate this feature. This dataset contains the results of an experiment comparing the effects of different foliage types and time without food on the movement of gypsy moth caterpillars. The dataset we’re about to load has 6 columns. The id column provides a unique identifier to each caterpillar observation, the food column specifies what food source the caterpillar was raised on (one of three tree species or an artificial diet), and the starve column identifies how long the insects were starved before the experiments occurred (either 0, 24, or 48 hours). These three columns are categorical and used to identify the treatments each insect underwent. The total_distance column tells us how far the caterpillar crawled in centimeters during a 10 minute trial and the stops column records how often the insect stopped moving. There is also another superfluous column, again named X that we’ll remove before we work with the data.</p>
<p>In the case of this experiment, we’re interested in summarizing how far each combination of food and starvation time moved and how often they stopped. We’ll need to provide both the food and starve column names to <code>group_by()</code> so it gives us the summaries we want. Let’s calculate the mean and standard error (NOT standard deviation) for each, as well as the number of observations for each combination of treatments. While we’re at it, let’s rearrange our summary table so it’s ordered from smallest mean_total_distance to largest.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load the data</span>
caterpillar_movement &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;./data/example_movement_data.csv&quot;</span>)

<span class="co"># Summarise the data!</span>
caterpillar_movement <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="co"># Use select to remove the X column</span>
<span class="st">   </span><span class="kw">select</span>(<span class="op">-</span>X) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="co"># Group_by to organize our data for summary</span>
<span class="st">   </span><span class="kw">group_by</span>(food, starve) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">summarise</span>(<span class="dt">mean_total_distance =</span> <span class="kw">mean</span>(total_distance),
             <span class="dt">se_total_distance =</span> <span class="kw">sd</span>(total_distance) <span class="op">/</span><span class="st"> </span><span class="kw">n</span>(),
             <span class="dt">mean_stops =</span> <span class="kw">mean</span>(stops),
             <span class="dt">se_stops =</span> <span class="kw">sd</span>(stops) <span class="op">/</span><span class="st"> </span><span class="kw">n</span>(),
             <span class="dt">count =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">arrange</span>(mean_total_distance)</code></pre></div>
<pre><code>## # A tibble: 12 x 7
## # Groups:   food [4]
##    food  starve mean_total_dist~ se_total_distan~ mean_stops se_stops count
##    &lt;fct&gt;  &lt;int&gt;            &lt;dbl&gt;            &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;
##  1 diet       0             82.8             3.15       72.2    1.92     20
##  2 diet      24            107.              4.20       33.6    0.764    20
##  3 diet      48            185.              5.38       39.5    1.66     21
##  4 larch     24            188.              4.73       27.8    1.97     20
##  5 norw~     48            210.              7.30       50.1    2.86     20
##  6 larch     48            212.              6.23       32.4    1.80     20
##  7 norw~      0            223.              7.66       39.5    0.900    20
##  8 buro~      0            259.              8.83       42.6    1.06     21
##  9 larch      0            282.              7.13       17.2    1.05     20
## 10 norw~     24            390.              7.78       14.9    0.912    21
## 11 buro~     48            391.             11.5        23.2    1.15     21
## 12 buro~     24            432.             10.1        30      1.30     20</code></pre>
<p>And there you have it! In just a few lines of code we’ve written an analysis that is:</p>
<ul>
<li>Reproducible. Anyone can grab this code with this data and get the same results we got.</li>
<li>Simple to read. No nested functions, no lines with code running off the screen.</li>
<li>Simple to think about. Each function serves a (relatively) clear purpose once you’re familiar with them</li>
<li>Simple to modify later. We could add more summary variables or rerun the code with additional data without too much trouble.</li>
<li>Built from basic building blocks. The packages in the tidyverse are written with a coherent design philosophy, which allows them to play well with each other and makes your code quite modular. You can use many of these functions in different orders and with additional functions and produce elegant code.</li>
</ul>
</div>
<div id="tidyverse-practice-problems" class="section level3">
<h3><span class="header-section-number">3.6.7</span> <code>tidyverse</code> Practice problems</h3>
<p>We’ll use some of the datasets built into R to practice using some of these functions. Look for the data_manipulation_cleaning_ANSWERS file if you get stuck or want to check your answers. If you’re working directly inside this R markdown file, feel free to type the code in the code chunks. Otherwise I recommend making your own R script and writing out your answers there.</p>
<p>We’ll start by using the iris data set. This data set comes preloaded so you can access it easily from any R session by just typing <code>iris</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(iris)</code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>The iris dataset contains four variables which are measurements of sepal and petal length and width for three different species in the <em>Iris</em> genus.</p>
<ol style="list-style-type: decimal">
<li>Write code that creates a separate data frame with just the petal length, petal width, and species variables.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris_petals &lt;-<span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Now, repeat what you did in question one but for the sepal variables and also arrange the data frame from lowest to highest sepal width.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris_sepals &lt;-<span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Create two new variables that represents the ratio of sepal length to sepal width and petal length to petal width, respectively, and add them to the iris data frame. Save this as an object separate from the overall iris dataset as you’ll need it in future questions.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris_ratios &lt;-<span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Using the data frame you created in the last problem, provide an overall summary of the data. Use R to find the average for all 6 variables included in this data frame. (I don’t want you to use <code>group_by()</code> yet.)</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris_ratios <span class="op">%&gt;%</span><span class="st"> </span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Now, repeat what you did in question 4 but provided species level means for all 6 variables (this will require using <code>group_by()</code>).</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># I&#39;m not starting this one for you :) But you can do it!</span></code></pre></div>
</div>
</div>
<div id="modifying-data-with-case_when" class="section level2">
<h2><span class="header-section-number">3.7</span> Modifying data with <code>case_when()</code></h2>
<p>The <code>case_when()</code> function is, in my mind, a little bit more of an advanced cleaning tool, which is why I’ve positioned it here at the end of this tutorial. This function is a powerful tool for cleaning data based on a set of conditions or constructing new variables in conjunction with mutate. Let’s return to the buprestid data we’ve been working with to illustrate one example. First, take a look at the first 6 rows of this data set when it’s arranged by scientific name.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># First few rows of the buprestid data</span>
buprestid_data &lt;-<span class="st"> </span>buprestid_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">arrange</span>(scientificname)

<span class="kw">head</span>(buprestid_data)</code></pre></div>
<pre><code>##     scientificname       county n recent_collect_date recent_id_date mass
## 1 Acmaeodera acuta       aitkin 0                  NA             NA   NA
## 2 Acmaeodera acuta        anoka 0                  NA             NA   NA
## 3 Acmaeodera acuta anoka/isanti 0                  NA             NA   NA
## 4 Acmaeodera acuta aonka/isanti 0                  NA             NA   NA
## 5 Acmaeodera acuta       becker 0                  NA             NA   NA
## 6 Acmaeodera acuta     beltrami 0                  NA             NA   NA
##   length
## 1     NA
## 2     NA
## 3     NA
## 4     NA
## 5     NA
## 6     NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Let&#39;s look at all the unique entries for county in our dataset too to check</span>
<span class="co"># for more errors. The unique() function looks at all the values in our data</span>
<span class="co"># frame buprestid_data, specifically in the column &quot;county&quot; and returns all</span>
<span class="co"># the unique values.</span>
<span class="kw">unique</span>(buprestid_data<span class="op">$</span>county)</code></pre></div>
<pre><code>##  [1] aitkin             anoka              anoka/isanti      
##  [4] aonka/isanti       becker             beltrami          
##  [7] benton             big stone          blue earth        
## [10] brown              carlton            carver            
## [13] cass               chippewa           chisago           
## [16] clay               clearwater         cook              
## [19] cottonwood         crow wing          dakota            
## [22] dodge              douglas            faribault         
## [25] fillmore           freeborn           goodhue           
## [28] grant              hennepin           houston           
## [31] hubbard            isanti             itasca            
## [34] itasca park        jackson            kanabec           
## [37] kandiyohi          kittson            koochiching       
## [40] lac qui parle      lake               lake of the woods 
## [43] le sueur           lincoln            lyon              
## [46] mahnomen           marshall           martin            
## [49] mcleod             meeker             mille lacs        
## [52] mille lacs lake    morrison           mower             
## [55] murray             nicollet           nobles            
## [58] norman             olmsted            otter tail        
## [61] pennington         pine               pipestone         
## [64] polk               pope               ramsey            
## [67] red lake           redwood            renville          
## [70] rice               rock               roseau            
## [73] saint anthony park santa rita         scott             
## [76] sherburne          sibley             st louis          
## [79] stearns            steele             stevens           
## [82] swift              todd               traverse          
## [85] wabasha            wadena             waseca            
## [88] washington         watonwan           wilkin            
## [91] winona             wright             yellow medicine   
## 93 Levels: aitkin anoka anoka/isanti aonka/isanti becker ... yellow medicine</code></pre>
<p>Look at the <code>county</code> column. You might notice that we have entries for both “anoka/isanti” and “aonka/isanti” counties. The second case, “aonka/isanti” is a typo - there is no Aonka county in Minnesota. If you look through the data set, you’ll see that this typo is repeated. You could further examine the counties and find that there are entries for “saint anthony park”. That’s not a county, it’s a park in Ramsey county, so we’ll want to fix that too. Your first inclination might be to go into Excel and fix it, but you shouldn’t. If this data is updated in the future and someone makes a similar typo, you will have to once again go into Excel and fix it. Instead, we can write a few lines of code that check for common typos we know might exist in our data and fix them using <code>mutate()</code> and <code>case_when()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Currently county is a factor, we need to change the variable type to string</span>
<span class="co"># so we can work with it. If you try to run the code before changing it to a</span>
<span class="co"># string you&#39;ll get an error. This isn&#39;t something you would be expected to know</span>
<span class="co"># right away and is the type of knowledge you pick up through trial and error </span>
<span class="co"># and lots of google searches.</span>
buprestid_data<span class="op">$</span>county &lt;-<span class="st"> </span><span class="kw">as.character</span>(buprestid_data<span class="op">$</span>county)

<span class="co"># Now let&#39;s fix our typo.</span>
buprestid_data &lt;-<span class="st"> </span>buprestid_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">mutate</span>(<span class="dt">county =</span> <span class="kw">case_when</span>(county <span class="op">==</span><span class="st"> &quot;aonka/isanti&quot;</span> <span class="op">~</span><span class="st"> &quot;anoka/isanti&quot;</span>,
                             county <span class="op">==</span><span class="st"> &quot;saint anthony park&quot;</span> <span class="op">~</span><span class="st"> &quot;ramsey&quot;</span>,
                             county <span class="op">==</span><span class="st"> </span>county <span class="op">~</span><span class="st"> </span>county
   ))

<span class="co"># Check that our typos are fixed</span>
<span class="kw">unique</span>(buprestid_data<span class="op">$</span>county)</code></pre></div>
<pre><code>##  [1] &quot;aitkin&quot;            &quot;anoka&quot;             &quot;anoka/isanti&quot;     
##  [4] &quot;becker&quot;            &quot;beltrami&quot;          &quot;benton&quot;           
##  [7] &quot;big stone&quot;         &quot;blue earth&quot;        &quot;brown&quot;            
## [10] &quot;carlton&quot;           &quot;carver&quot;            &quot;cass&quot;             
## [13] &quot;chippewa&quot;          &quot;chisago&quot;           &quot;clay&quot;             
## [16] &quot;clearwater&quot;        &quot;cook&quot;              &quot;cottonwood&quot;       
## [19] &quot;crow wing&quot;         &quot;dakota&quot;            &quot;dodge&quot;            
## [22] &quot;douglas&quot;           &quot;faribault&quot;         &quot;fillmore&quot;         
## [25] &quot;freeborn&quot;          &quot;goodhue&quot;           &quot;grant&quot;            
## [28] &quot;hennepin&quot;          &quot;houston&quot;           &quot;hubbard&quot;          
## [31] &quot;isanti&quot;            &quot;itasca&quot;            &quot;itasca park&quot;      
## [34] &quot;jackson&quot;           &quot;kanabec&quot;           &quot;kandiyohi&quot;        
## [37] &quot;kittson&quot;           &quot;koochiching&quot;       &quot;lac qui parle&quot;    
## [40] &quot;lake&quot;              &quot;lake of the woods&quot; &quot;le sueur&quot;         
## [43] &quot;lincoln&quot;           &quot;lyon&quot;              &quot;mahnomen&quot;         
## [46] &quot;marshall&quot;          &quot;martin&quot;            &quot;mcleod&quot;           
## [49] &quot;meeker&quot;            &quot;mille lacs&quot;        &quot;mille lacs lake&quot;  
## [52] &quot;morrison&quot;          &quot;mower&quot;             &quot;murray&quot;           
## [55] &quot;nicollet&quot;          &quot;nobles&quot;            &quot;norman&quot;           
## [58] &quot;olmsted&quot;           &quot;otter tail&quot;        &quot;pennington&quot;       
## [61] &quot;pine&quot;              &quot;pipestone&quot;         &quot;polk&quot;             
## [64] &quot;pope&quot;              &quot;ramsey&quot;            &quot;red lake&quot;         
## [67] &quot;redwood&quot;           &quot;renville&quot;          &quot;rice&quot;             
## [70] &quot;rock&quot;              &quot;roseau&quot;            &quot;santa rita&quot;       
## [73] &quot;scott&quot;             &quot;sherburne&quot;         &quot;sibley&quot;           
## [76] &quot;st louis&quot;          &quot;stearns&quot;           &quot;steele&quot;           
## [79] &quot;stevens&quot;           &quot;swift&quot;             &quot;todd&quot;             
## [82] &quot;traverse&quot;          &quot;wabasha&quot;           &quot;wadena&quot;           
## [85] &quot;waseca&quot;            &quot;washington&quot;        &quot;watonwan&quot;         
## [88] &quot;wilkin&quot;            &quot;winona&quot;            &quot;wright&quot;           
## [91] &quot;yellow medicine&quot;</code></pre>
<p>If you look through the list of unique county names, you’ll find that there are no more “aonka” typos or records for “st anthony park”. Let’s unpack how we did that. Using <code>mutate()</code>, we told R that we wanted to make edits to the county variable by putting “county” on the left side of that first <code>=</code> operator in <code>mutate()</code>. We could’ve made a new variable by naming it something other than “county”, but we wanted to fix some errors (aka clean our data), so we kept the name the same. Then we told R that we wanted county to be edited according to certain conditions, provided using <code>case_when()</code>. In side <code>case_when()</code>, we specified that whenever county was equal to the value “aokna/isanti” (<code>county == &quot;aonka/isanti&quot;</code>), we wanted R to change it to “anoka/isanti” using the <code>~</code>. Unfortunately, <code>~</code> is used in different ways in different functions so there isn’t a consistent definition for <code>~</code> between functions. In the case of <code>case_when()</code>, the <code>~</code> can be read as “change to”. So the first line of our <code>case_when()</code> function could be read as “when <code>county</code> is equal to ‘aonka/isanti’, change <code>county</code> to ‘anoka/isanti’”.</p>
<p>The second line of our <code>case_when()</code> function then can be read as “when <code>county</code> is equal to ‘saint anthony park’, change <code>county</code> to ‘ramsey’”. So those two lines take care of our common typos. The last line is needed because there are a lot of cases where <code>county</code> isn’t equal to “aonka/isanti” or “saint anthony park”. R is not intelligent enough to know that once we’ve gone through the two specific cases specified that we want the rest to remain the same, so we have to tell it that by specifying that “when county is equal to [any other value of county than the two we specified previously], keep it as is”. When using <code>case_when()</code> it’s important you specify your cases in order from most specific to most general because R will evaluate the code in the order you provide them.</p>
<p>The <code>case_when()</code> function can also be used with numeric variables. If we look at the range of beetle mass present in our data, we’ll see that we have observations of beetle masses between about 30 grams and 80 grams.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">range</span>(buprestid_data<span class="op">$</span>mass, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## [1] 30.56638 79.77642</code></pre>
<p>Now, you would never want to take a continuous variable like mass and turn it into a discrete variable like size (“small”, “medium”, “large”) for a statistical analysis because you’d lose information. However, there may be other reasons, say for data visualization, that you might want to categorize the mass variable into discrete categories. We can use <code>case_when()</code> to do this.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">buprestid_data &lt;-<span class="st"> </span>buprestid_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="co"># Make our new &quot;size&quot; variable</span>
<span class="st">   </span><span class="kw">mutate</span>(<span class="dt">size =</span> <span class="kw">case_when</span>(mass <span class="op">&gt;=</span><span class="st"> </span><span class="dv">62</span> <span class="op">~</span><span class="st"> &quot;large&quot;</span>,
                           mass <span class="op">&lt;</span><span class="st"> </span><span class="dv">62</span> <span class="op">~</span><span class="st"> &quot;medium&quot;</span>,
                           mass <span class="op">&lt;</span><span class="st"> </span><span class="dv">46</span> <span class="op">~</span><span class="st"> &quot;small&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="co"># Pipe the results to a few different functions so we can display what I need</span>
<span class="st">   </span><span class="co"># to show you the relevant results.</span>
<span class="st">   </span><span class="kw">select</span>(size, mass, <span class="kw">everything</span>()) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">arrange</span>(<span class="kw">desc</span>(n))

<span class="kw">head</span>(buprestid_data)</code></pre></div>
<pre><code>##     size     mass      scientificname     county  n recent_collect_date
## 1  large 79.77642   Anthaxia quercata  crow wing 63                1959
## 2  large 63.96925 Agrilus planipennis     ramsey 52                2015
## 3 medium 60.13572      Agrilus parvus  pipestone 51                1973
## 4 medium 38.38265  Agrilus cuprescens      anoka 40                2004
## 5 medium 40.46855     Agrilus liragus washington 24                2016
## 6 medium 44.11903  Agrilus granulatus    chisago 21                2017
##   recent_id_date   length
## 1             NA 79.77642
## 2             NA 63.96925
## 3             NA 60.13572
## 4             NA 38.38265
## 5           2017 40.46855
## 6           2017 44.11903</code></pre>
<p>Hmm, something appears to have gone wrong during this code chunk. Lines 4, 5, and 6 of the above output should all be classified as size “small” based on their mass but they weren’t. That’s because we didn’t go from most specific to most general in our <code>case_when()</code> function. <code>mass &lt; 62</code> is a more general condition than <code>mass &lt; 46</code> so we need to reverse the order we wrote our <code>case_when()</code> arguments in. (This also illustrates why it’s always important to check results of any code you run! R won’t catch these kinds of errors for you.)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">buprestid_data &lt;-<span class="st"> </span>buprestid_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="co"># Make our new &quot;size&quot; variable</span>
<span class="st">   </span><span class="kw">mutate</span>(<span class="dt">size =</span> <span class="kw">case_when</span>(mass <span class="op">&lt;</span><span class="st"> </span><span class="dv">46</span> <span class="op">~</span><span class="st"> &quot;small&quot;</span>,
                           mass <span class="op">&lt;</span><span class="st"> </span><span class="dv">62</span> <span class="op">~</span><span class="st"> &quot;medium&quot;</span>,
                           mass <span class="op">&gt;=</span><span class="st"> </span><span class="dv">62</span> <span class="op">~</span><span class="st"> &quot;large&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="co"># Pipe the results to a few different functions so we can display what I need</span>
<span class="st">   </span><span class="co"># to show you the relevant results.</span>
<span class="st">   </span><span class="kw">select</span>(size, mass, <span class="kw">everything</span>()) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">arrange</span>(<span class="kw">desc</span>(n))

<span class="kw">head</span>(buprestid_data)</code></pre></div>
<pre><code>##     size     mass      scientificname     county  n recent_collect_date
## 1  large 79.77642   Anthaxia quercata  crow wing 63                1959
## 2  large 63.96925 Agrilus planipennis     ramsey 52                2015
## 3 medium 60.13572      Agrilus parvus  pipestone 51                1973
## 4  small 38.38265  Agrilus cuprescens      anoka 40                2004
## 5  small 40.46855     Agrilus liragus washington 24                2016
## 6  small 44.11903  Agrilus granulatus    chisago 21                2017
##   recent_id_date   length
## 1             NA 79.77642
## 2             NA 63.96925
## 3             NA 60.13572
## 4             NA 38.38265
## 5           2017 40.46855
## 6           2017 44.11903</code></pre>
<p>That’s better! Now we’ve classified all our masses into size categories.</p>
<div id="case_when-practice-problem" class="section level3">
<h3><span class="header-section-number">3.7.1</span> <code>case_when()</code> practice problem</h3>
<ol start="6" style="list-style-type: decimal">
<li>Here’s a histogram showing the distribution of sepal lengths for all the iris observations in the iris dataset. It looks like the sepal lengths tend to fall between 4 and 8 centimeters. Use <code>case_when()</code> to create a new <code>size_sepal_length</code> variable, similar to the above example. Decide how many categories are appropriate and where to place the breaks between categories. Also, edit the <code>Species</code> variable so instead of just listing the species name, it lists both genus and species (for example, “setosa” would become “Iris setosa”. The genus for each case is “Iris”). <em>Bonus points</em> if you can create the <code>size_sepal_length</code> variable and edit the <code>Species</code> variable within a single use of <code>mutate()</code>.</li>
</ol>
<p><img src="_main_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
</div>
</div>
<div id="answers-to-practice-questions" class="section level2">
<h2><span class="header-section-number">3.8</span> Answers to practice questions</h2>
<p>For each practice question provided, it’s possible more than one way to complete the problem exists. I show only one method for each question.</p>
<ol style="list-style-type: decimal">
<li>Write code that creates a separate data frame with just the petal length, petal width, and species variables.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris_petals &lt;-<span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">select</span>(Petal.Length<span class="op">:</span>Species)</code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Now, repeat what you did in question one but for the sepal variables and also arrange the data frame from lowest to highest sepal width.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris_sepals &lt;-<span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">select</span>(Sepal.Length, Sepal.Width, Species) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">arrange</span>(Sepal.Width)</code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Create two new variables that represents the ratio of sepal length to sepal width and petal length to petal width, respectively, and add them to the iris data frame. Save this as an object separate from the overall iris dataset as you’ll need it in future questions.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris_ratios &lt;-<span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">mutate</span>(<span class="dt">ratio_sepal =</span> Sepal.Length <span class="op">/</span><span class="st"> </span>Sepal.Width,
          <span class="dt">ratio_petal =</span> Petal.Length <span class="op">/</span><span class="st"> </span>Petal.Width)</code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Using the data frame you created in the last problem, provide an overall summary of the data. Use R to find the average for all 6 variables included in this data frame. (I don’t want you to use <code>group_by()</code> yet.)</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris_ratios <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">summarise</span>(<span class="dt">mean_sepal_length =</span> <span class="kw">mean</span>(Sepal.Length),
             <span class="dt">mean_sepal_width =</span> <span class="kw">mean</span>(Sepal.Width),
             <span class="dt">mean_ratio_sepal =</span> <span class="kw">mean</span>(ratio_sepal),
             <span class="dt">mean_petal_length =</span> <span class="kw">mean</span>(Petal.Length),
             <span class="dt">mean_petal_width =</span> <span class="kw">mean</span>(Petal.Width),
             <span class="dt">mean_ratio_petal =</span> <span class="kw">mean</span>(ratio_petal))</code></pre></div>
<pre><code>##   mean_sepal_length mean_sepal_width mean_ratio_sepal mean_petal_length
## 1          5.843333         3.057333         1.953681             3.758
##   mean_petal_width mean_ratio_petal
## 1         1.199333           4.3105</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>Now, repeat what you did in question 4 but provided species level means for all 6 variables (this will require using <code>group_by()</code>).</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris_ratios <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">group_by</span>(Species) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">summarise</span>(<span class="dt">mean_sepal_length =</span> <span class="kw">mean</span>(Sepal.Length),
             <span class="dt">mean_sepal_width =</span> <span class="kw">mean</span>(Sepal.Width),
             <span class="dt">mean_ratio_sepal =</span> <span class="kw">mean</span>(ratio_sepal),
             <span class="dt">mean_petal_length =</span> <span class="kw">mean</span>(Petal.Length),
             <span class="dt">mean_petal_width =</span> <span class="kw">mean</span>(Petal.Width),
             <span class="dt">mean_ratio_petal =</span> <span class="kw">mean</span>(ratio_petal))</code></pre></div>
<ol start="6" style="list-style-type: decimal">
<li>Here’s a histogram showing the distribution of sepal lengths for all the iris observations in the iris dataset. It looks like the sepal lengths tend to fall between 4 and 8 centimeters. Use <code>case_when()</code> to create a new <code>size_sepal_length</code> variable, similar to the above example. Decide how many categories are appropriate and where to place the breaks between categories. Also, edit the <code>Species</code> variable so instead of just listing the species name, it lists both genus and species (for example, “setosa” would become “Iris setosa”. The genus for each case is “Iris”). <em>Bonus points</em> if you can create the <code>size_sepal_length</code> variable and edit the <code>Species</code> variable within a single use of <code>mutate()</code>.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Find our unique values for Species</span>
<span class="kw">unique</span>(iris<span class="op">$</span>Species)</code></pre></div>
<pre><code>## [1] setosa     versicolor virginica 
## Levels: setosa versicolor virginica</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Mutate new variable and edit Species variable</span>
iris <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">mutate</span>(<span class="dt">size_sepal_length =</span> <span class="kw">case_when</span>(Sepal.Length <span class="op">&lt;</span><span class="st"> </span><span class="dv">5</span> <span class="op">~</span><span class="st"> &quot;small&quot;</span>,
                                        Sepal.Length <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span> <span class="op">~</span><span class="st"> &quot;medium&quot;</span>,
                                        Sepal.Length <span class="op">&gt;=</span><span class="st"> </span><span class="dv">7</span> <span class="op">~</span><span class="st"> &quot;large&quot;</span>),
          <span class="dt">Species =</span> <span class="kw">case_when</span>(Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span> <span class="op">~</span><span class="st"> &quot;Iris setosa&quot;</span>,
                              Species <span class="op">==</span><span class="st"> &quot;versicolor&quot;</span> <span class="op">~</span><span class="st"> &quot;Iris versicolor&quot;</span>,
                              Species <span class="op">==</span><span class="st"> &quot;virginica&quot;</span> <span class="op">~</span><span class="st"> &quot;Iris virginica&quot;</span>))</code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width         Species
## 1            5.1         3.5          1.4         0.2     Iris setosa
## 2            4.9         3.0          1.4         0.2     Iris setosa
## 3            4.7         3.2          1.3         0.2     Iris setosa
## 4            4.6         3.1          1.5         0.2     Iris setosa
## 5            5.0         3.6          1.4         0.2     Iris setosa
## 6            5.4         3.9          1.7         0.4     Iris setosa
## 7            4.6         3.4          1.4         0.3     Iris setosa
## 8            5.0         3.4          1.5         0.2     Iris setosa
## 9            4.4         2.9          1.4         0.2     Iris setosa
## 10           4.9         3.1          1.5         0.1     Iris setosa
## 11           5.4         3.7          1.5         0.2     Iris setosa
## 12           4.8         3.4          1.6         0.2     Iris setosa
## 13           4.8         3.0          1.4         0.1     Iris setosa
## 14           4.3         3.0          1.1         0.1     Iris setosa
## 15           5.8         4.0          1.2         0.2     Iris setosa
## 16           5.7         4.4          1.5         0.4     Iris setosa
## 17           5.4         3.9          1.3         0.4     Iris setosa
## 18           5.1         3.5          1.4         0.3     Iris setosa
## 19           5.7         3.8          1.7         0.3     Iris setosa
## 20           5.1         3.8          1.5         0.3     Iris setosa
## 21           5.4         3.4          1.7         0.2     Iris setosa
## 22           5.1         3.7          1.5         0.4     Iris setosa
## 23           4.6         3.6          1.0         0.2     Iris setosa
## 24           5.1         3.3          1.7         0.5     Iris setosa
## 25           4.8         3.4          1.9         0.2     Iris setosa
## 26           5.0         3.0          1.6         0.2     Iris setosa
## 27           5.0         3.4          1.6         0.4     Iris setosa
## 28           5.2         3.5          1.5         0.2     Iris setosa
## 29           5.2         3.4          1.4         0.2     Iris setosa
## 30           4.7         3.2          1.6         0.2     Iris setosa
## 31           4.8         3.1          1.6         0.2     Iris setosa
## 32           5.4         3.4          1.5         0.4     Iris setosa
## 33           5.2         4.1          1.5         0.1     Iris setosa
## 34           5.5         4.2          1.4         0.2     Iris setosa
## 35           4.9         3.1          1.5         0.2     Iris setosa
## 36           5.0         3.2          1.2         0.2     Iris setosa
## 37           5.5         3.5          1.3         0.2     Iris setosa
## 38           4.9         3.6          1.4         0.1     Iris setosa
## 39           4.4         3.0          1.3         0.2     Iris setosa
## 40           5.1         3.4          1.5         0.2     Iris setosa
## 41           5.0         3.5          1.3         0.3     Iris setosa
## 42           4.5         2.3          1.3         0.3     Iris setosa
## 43           4.4         3.2          1.3         0.2     Iris setosa
## 44           5.0         3.5          1.6         0.6     Iris setosa
## 45           5.1         3.8          1.9         0.4     Iris setosa
## 46           4.8         3.0          1.4         0.3     Iris setosa
## 47           5.1         3.8          1.6         0.2     Iris setosa
## 48           4.6         3.2          1.4         0.2     Iris setosa
## 49           5.3         3.7          1.5         0.2     Iris setosa
## 50           5.0         3.3          1.4         0.2     Iris setosa
## 51           7.0         3.2          4.7         1.4 Iris versicolor
## 52           6.4         3.2          4.5         1.5 Iris versicolor
## 53           6.9         3.1          4.9         1.5 Iris versicolor
## 54           5.5         2.3          4.0         1.3 Iris versicolor
## 55           6.5         2.8          4.6         1.5 Iris versicolor
## 56           5.7         2.8          4.5         1.3 Iris versicolor
## 57           6.3         3.3          4.7         1.6 Iris versicolor
## 58           4.9         2.4          3.3         1.0 Iris versicolor
## 59           6.6         2.9          4.6         1.3 Iris versicolor
## 60           5.2         2.7          3.9         1.4 Iris versicolor
## 61           5.0         2.0          3.5         1.0 Iris versicolor
## 62           5.9         3.0          4.2         1.5 Iris versicolor
## 63           6.0         2.2          4.0         1.0 Iris versicolor
## 64           6.1         2.9          4.7         1.4 Iris versicolor
## 65           5.6         2.9          3.6         1.3 Iris versicolor
## 66           6.7         3.1          4.4         1.4 Iris versicolor
## 67           5.6         3.0          4.5         1.5 Iris versicolor
## 68           5.8         2.7          4.1         1.0 Iris versicolor
## 69           6.2         2.2          4.5         1.5 Iris versicolor
## 70           5.6         2.5          3.9         1.1 Iris versicolor
## 71           5.9         3.2          4.8         1.8 Iris versicolor
## 72           6.1         2.8          4.0         1.3 Iris versicolor
## 73           6.3         2.5          4.9         1.5 Iris versicolor
## 74           6.1         2.8          4.7         1.2 Iris versicolor
## 75           6.4         2.9          4.3         1.3 Iris versicolor
## 76           6.6         3.0          4.4         1.4 Iris versicolor
## 77           6.8         2.8          4.8         1.4 Iris versicolor
## 78           6.7         3.0          5.0         1.7 Iris versicolor
## 79           6.0         2.9          4.5         1.5 Iris versicolor
## 80           5.7         2.6          3.5         1.0 Iris versicolor
## 81           5.5         2.4          3.8         1.1 Iris versicolor
## 82           5.5         2.4          3.7         1.0 Iris versicolor
## 83           5.8         2.7          3.9         1.2 Iris versicolor
## 84           6.0         2.7          5.1         1.6 Iris versicolor
## 85           5.4         3.0          4.5         1.5 Iris versicolor
## 86           6.0         3.4          4.5         1.6 Iris versicolor
## 87           6.7         3.1          4.7         1.5 Iris versicolor
## 88           6.3         2.3          4.4         1.3 Iris versicolor
## 89           5.6         3.0          4.1         1.3 Iris versicolor
## 90           5.5         2.5          4.0         1.3 Iris versicolor
## 91           5.5         2.6          4.4         1.2 Iris versicolor
## 92           6.1         3.0          4.6         1.4 Iris versicolor
## 93           5.8         2.6          4.0         1.2 Iris versicolor
## 94           5.0         2.3          3.3         1.0 Iris versicolor
## 95           5.6         2.7          4.2         1.3 Iris versicolor
## 96           5.7         3.0          4.2         1.2 Iris versicolor
## 97           5.7         2.9          4.2         1.3 Iris versicolor
## 98           6.2         2.9          4.3         1.3 Iris versicolor
## 99           5.1         2.5          3.0         1.1 Iris versicolor
## 100          5.7         2.8          4.1         1.3 Iris versicolor
## 101          6.3         3.3          6.0         2.5  Iris virginica
## 102          5.8         2.7          5.1         1.9  Iris virginica
## 103          7.1         3.0          5.9         2.1  Iris virginica
## 104          6.3         2.9          5.6         1.8  Iris virginica
## 105          6.5         3.0          5.8         2.2  Iris virginica
## 106          7.6         3.0          6.6         2.1  Iris virginica
## 107          4.9         2.5          4.5         1.7  Iris virginica
## 108          7.3         2.9          6.3         1.8  Iris virginica
## 109          6.7         2.5          5.8         1.8  Iris virginica
## 110          7.2         3.6          6.1         2.5  Iris virginica
## 111          6.5         3.2          5.1         2.0  Iris virginica
## 112          6.4         2.7          5.3         1.9  Iris virginica
## 113          6.8         3.0          5.5         2.1  Iris virginica
## 114          5.7         2.5          5.0         2.0  Iris virginica
## 115          5.8         2.8          5.1         2.4  Iris virginica
## 116          6.4         3.2          5.3         2.3  Iris virginica
## 117          6.5         3.0          5.5         1.8  Iris virginica
## 118          7.7         3.8          6.7         2.2  Iris virginica
## 119          7.7         2.6          6.9         2.3  Iris virginica
## 120          6.0         2.2          5.0         1.5  Iris virginica
## 121          6.9         3.2          5.7         2.3  Iris virginica
## 122          5.6         2.8          4.9         2.0  Iris virginica
## 123          7.7         2.8          6.7         2.0  Iris virginica
## 124          6.3         2.7          4.9         1.8  Iris virginica
## 125          6.7         3.3          5.7         2.1  Iris virginica
## 126          7.2         3.2          6.0         1.8  Iris virginica
## 127          6.2         2.8          4.8         1.8  Iris virginica
## 128          6.1         3.0          4.9         1.8  Iris virginica
## 129          6.4         2.8          5.6         2.1  Iris virginica
## 130          7.2         3.0          5.8         1.6  Iris virginica
## 131          7.4         2.8          6.1         1.9  Iris virginica
## 132          7.9         3.8          6.4         2.0  Iris virginica
## 133          6.4         2.8          5.6         2.2  Iris virginica
## 134          6.3         2.8          5.1         1.5  Iris virginica
## 135          6.1         2.6          5.6         1.4  Iris virginica
## 136          7.7         3.0          6.1         2.3  Iris virginica
## 137          6.3         3.4          5.6         2.4  Iris virginica
## 138          6.4         3.1          5.5         1.8  Iris virginica
## 139          6.0         3.0          4.8         1.8  Iris virginica
## 140          6.9         3.1          5.4         2.1  Iris virginica
## 141          6.7         3.1          5.6         2.4  Iris virginica
## 142          6.9         3.1          5.1         2.3  Iris virginica
## 143          5.8         2.7          5.1         1.9  Iris virginica
## 144          6.8         3.2          5.9         2.3  Iris virginica
## 145          6.7         3.3          5.7         2.5  Iris virginica
## 146          6.7         3.0          5.2         2.3  Iris virginica
## 147          6.3         2.5          5.0         1.9  Iris virginica
## 148          6.5         3.0          5.2         2.0  Iris virginica
## 149          6.2         3.4          5.4         2.3  Iris virginica
## 150          5.9         3.0          5.1         1.8  Iris virginica
##     size_sepal_length
## 1              medium
## 2               small
## 3               small
## 4               small
## 5              medium
## 6              medium
## 7               small
## 8              medium
## 9               small
## 10              small
## 11             medium
## 12              small
## 13              small
## 14              small
## 15             medium
## 16             medium
## 17             medium
## 18             medium
## 19             medium
## 20             medium
## 21             medium
## 22             medium
## 23              small
## 24             medium
## 25              small
## 26             medium
## 27             medium
## 28             medium
## 29             medium
## 30              small
## 31              small
## 32             medium
## 33             medium
## 34             medium
## 35              small
## 36             medium
## 37             medium
## 38              small
## 39              small
## 40             medium
## 41             medium
## 42              small
## 43              small
## 44             medium
## 45             medium
## 46              small
## 47             medium
## 48              small
## 49             medium
## 50             medium
## 51              large
## 52             medium
## 53             medium
## 54             medium
## 55             medium
## 56             medium
## 57             medium
## 58              small
## 59             medium
## 60             medium
## 61             medium
## 62             medium
## 63             medium
## 64             medium
## 65             medium
## 66             medium
## 67             medium
## 68             medium
## 69             medium
## 70             medium
## 71             medium
## 72             medium
## 73             medium
## 74             medium
## 75             medium
## 76             medium
## 77             medium
## 78             medium
## 79             medium
## 80             medium
## 81             medium
## 82             medium
## 83             medium
## 84             medium
## 85             medium
## 86             medium
## 87             medium
## 88             medium
## 89             medium
## 90             medium
## 91             medium
## 92             medium
## 93             medium
## 94             medium
## 95             medium
## 96             medium
## 97             medium
## 98             medium
## 99             medium
## 100            medium
## 101            medium
## 102            medium
## 103             large
## 104            medium
## 105            medium
## 106             large
## 107             small
## 108             large
## 109            medium
## 110             large
## 111            medium
## 112            medium
## 113            medium
## 114            medium
## 115            medium
## 116            medium
## 117            medium
## 118             large
## 119             large
## 120            medium
## 121            medium
## 122            medium
## 123             large
## 124            medium
## 125            medium
## 126             large
## 127            medium
## 128            medium
## 129            medium
## 130             large
## 131             large
## 132             large
## 133            medium
## 134            medium
## 135            medium
## 136             large
## 137            medium
## 138            medium
## 139            medium
## 140            medium
## 141            medium
## 142            medium
## 143            medium
## 144            medium
## 145            medium
## 146            medium
## 147            medium
## 148            medium
## 149            medium
## 150            medium</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="organizing-your-work-and-your-code.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="for-loops.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub", "_main.mobi"],
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
